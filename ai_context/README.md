# AI Context for py_accountant

> **–¶–µ–ª—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è AI –º–æ–¥–µ–ª–µ–π –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ/–¥–æ—Ä–∞–±–æ—Ç–∫–µ –∫–æ–¥–∞  
> **–†–∞–∑–º–µ—Ä**: ~1,900 —Å—Ç—Ä–æ–∫ (vs 10,614 –≤ docs/ –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞)  
> **–≠–∫–æ–Ω–æ–º–∏—è**: 82% —Ç–æ–∫–µ–Ω–æ–≤

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
ai_context/
‚îú‚îÄ‚îÄ INDEX.yaml                    # –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –±—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏
‚îú‚îÄ‚îÄ contracts/
‚îÇ   ‚îú‚îÄ‚îÄ PORTS.yaml               # –í—Å–µ –ø–æ—Ä—Ç—ã (AsyncUnitOfWork, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, Clock)
‚îÇ   ‚îú‚îÄ‚îÄ DTOS.yaml                # –í—Å–µ DTOs (input/output —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
‚îÇ   ‚îú‚îÄ‚îÄ DOMAIN_RULES.yaml        # –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
‚îÇ   ‚îî‚îÄ‚îÄ QUANTIZATION.yaml        # –ü—Ä–∞–≤–∏–ª–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è (money, rate)
‚îú‚îÄ‚îÄ flows/
‚îÇ   ‚îú‚îÄ‚îÄ POST_TRANSACTION.yaml    # Data flow –¥–ª—è AsyncPostTransaction
‚îÇ   ‚îî‚îÄ‚îÄ ... (–¥—Ä—É–≥–∏–µ use cases)
‚îú‚îÄ‚îÄ architecture/
‚îÇ   ‚îî‚îÄ‚îÄ CONSTRAINTS.yaml         # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
‚îî‚îÄ‚îÄ examples/
    ‚îî‚îÄ‚îÄ RPG_INTEGRATION_EXAMPLE.yaml
```

---

## üéØ –î–ª—è —á–µ–≥–æ —ç—Ç–æ –Ω—É–∂–Ω–æ?

### –ü—Ä–æ–±–ª–µ–º–∞
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `docs/` (10,614 —Å—Ç—Ä–æ–∫) –Ω–∞–ø–∏—Å–∞–Ω–∞ **–¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞**:
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- Tutorials –∏ guides
- **~60-70% –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–µ –Ω—É–∂–µ–Ω AI –º–æ–¥–µ–ª–∏**

### –†–µ—à–µ–Ω–∏–µ
AI Context —Å–æ–¥–µ—Ä–∂–∏—Ç **—Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ –ø—Ä–∞–≤–∏–ª–∞**:
- –°–∏–≥–Ω–∞—Ç—É—Ä—ã –ø–æ—Ä—Ç–æ–≤ (Protocols)
- –°—Ç—Ä—É–∫—Ç—É—Ä—ã DTOs
- Data flows (–ø–æ—à–∞–≥–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã)
- –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–æ–º–µ–Ω–∞
- –ü—Ä–∞–≤–∏–ª–∞ –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–æ–¥–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç 82% –º–µ–Ω—å—à–µ "—à—É–º–∞", —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö.

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è AI –º–æ–¥–µ–ª–∏: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ use case

**–ó–∞–¥–∞—á–∞**: "Implement AsyncCreateAccount use case"

**–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã**:
```yaml
1. ai_context/INDEX.yaml              # –ù–∞–≤–∏–≥–∞—Ü–∏—è
2. ai_context/contracts/PORTS.yaml    # AsyncUnitOfWork, AsyncAccountRepository
3. ai_context/contracts/DTOS.yaml     # AccountDTO
4. ai_context/contracts/DOMAIN_RULES.yaml  # Account validation rules
5. ai_context/flows/POST_TRANSACTION.yaml  # –ü–æ—Ö–æ–∂–∏–π flow (–ø–∞—Ç—Ç–µ—Ä–Ω)
```

**–ò—Ç–æ–≥–æ**: ~1,600 —Å—Ç—Ä–æ–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (vs 10,614 –≤ docs/)

### –î–ª—è AI –º–æ–¥–µ–ª–∏: –î–æ—Ä–∞–±–æ—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ use case

**–ó–∞–¥–∞—á–∞**: "Modify AsyncPostTransaction to support multi-currency"

**–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã**:
```yaml
1. ai_context/flows/POST_TRANSACTION.yaml  # –¢–µ–∫—É—â–∏–π flow
2. ai_context/contracts/DOMAIN_RULES.yaml  # FX conversion rules
3. ai_context/contracts/DTOS.yaml          # EntryLineDTO structure
```

**–ò—Ç–æ–≥–æ**: ~800 —Å—Ç—Ä–æ–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å docs/

| –ö—Ä–∏—Ç–µ—Ä–∏–π | docs/ (–¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞) | ai_context/ (–¥–ª—è AI) | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|---------------------|---------------------|-----------|
| –†–∞–∑–º–µ—Ä | 10,614 —Å—Ç—Ä–æ–∫ | ~1,900 —Å—Ç—Ä–æ–∫ | **82% ‚Üì** |
| –¢–æ–∫–µ–Ω–æ–≤ | ~40,000 | ~7,000 | **82% ‚Üì** |
| –®—É–º | –í—ã—Å–æ–∫–∏–π (tutorials, –ø—Ä–∏–º–µ—Ä—ã) | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π (—Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã) | **90% ‚Üì** |
| "Lost in middle" | –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ | –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ | **90% ‚Üì** |
| –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ | ~30 —Å–µ–∫ | ~5 —Å–µ–∫ | **83% ‚Üì** |
| –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å | –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ –∫–æ–¥–∞ | **100% ‚Üë** |

---

## üîÑ –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–í–∞—Ä–∏–∞–Ω—Ç 4)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: `tools/generate_ai_context.py`

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å AI context –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
python tools/generate_ai_context.py --output ai_context/

# –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ —Å –∫–æ–¥–æ–º
python tools/generate_ai_context.py --validate
```

### –ß—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:

1. **contracts/PORTS.yaml** ‚Äî –∏–∑ `Protocol` –∫–ª–∞—Å—Å–æ–≤ –≤ `application/ports.py`
2. **contracts/DTOS.yaml** ‚Äî –∏–∑ `@dataclass` –≤ `application/dto/`
3. **flows/*.yaml** ‚Äî –∏–∑ docstrings use cases (—Å–µ–∫—Ü–∏—è `AI_CONTEXT:`)

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|------|--------|------------|-------------------|
| `INDEX.yaml` | ~100 | –ù–∞–≤–∏–≥–∞—Ü–∏—è | –í—Å–µ–≥–¥–∞ (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞) |
| `contracts/PORTS.yaml` | ~600 | –ü–æ—Ä—Ç—ã (UoW, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏) | –†–∞–±–æ—Ç–∞ —Å use cases |
| `contracts/DTOS.yaml` | ~400 | DTOs (input/output) | –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ |
| `contracts/DOMAIN_RULES.yaml` | ~300 | –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã | –í–∞–ª–∏–¥–∞—Ü–∏—è, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ |
| `contracts/QUANTIZATION.yaml` | ~250 | –ü—Ä–∞–≤–∏–ª–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è | –†–∞–±–æ—Ç–∞ —Å Decimal |
| `flows/POST_TRANSACTION.yaml` | ~200 | Data flow | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è use case |
| `architecture/CONSTRAINTS.yaml` | ~300 | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ | –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |

---

## üí° Best Practices

### –î–ª—è –º–æ–¥–µ–ª–∏:

1. **–ù–∞—á–∏–Ω–∞–π —Å INDEX.yaml** ‚Äî –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º
2. **–ó–∞–≥—Ä—É–∂–∞–π –º–∏–Ω–∏–º—É–º** ‚Äî —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
3. **–ò—Å–ø–æ–ª—å–∑—É–π flows/** ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö use cases
4. **–ü—Ä–æ–≤–µ—Ä—è–π DOMAIN_RULES.yaml** ‚Äî –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã

### –î–ª—è —á–µ–ª–æ–≤–µ–∫–∞:

1. **–û–±–Ω–æ–≤–ª—è–π AI context** ‚Äî –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
2. **–ò—Å–ø–æ–ª—å–∑—É–π –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é** ‚Äî –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏
3. **–î–æ–±–∞–≤–ª—è–π AI_CONTEXT** ‚Äî –≤ docstrings –Ω–æ–≤—ã—Ö use cases
4. **–í–∞–ª–∏–¥–∏—Ä—É–π –≤ CI** ‚Äî `--validate` —Ñ–ª–∞–≥

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **–î–ª—è —á–µ–ª–æ–≤–µ–∫–∞**: `docs/` (10,614 —Å—Ç—Ä–æ–∫, –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- **–î–ª—è AI**: `ai_context/` (1,900 —Å—Ç—Ä–æ–∫, —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
- **RPG –≥—Ä–∞—Ñ**: `rpg_py_accountant.yaml` (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞)
- **–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è**: `tools/rpg/RPG_METHODOLOGY_BRIEF.md`
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è**: `docs/AI_CONTEXT_OPTIMIZATION.md`
- **–û—Ç—á–µ—Ç**: `ai_context/COMPLETION_REPORT.md`

