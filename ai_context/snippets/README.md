# AI Context Snippets

> **–ì–æ—Ç–æ–≤—ã–µ —Å–Ω–∏–ø–ø–µ—Ç—ã –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ –ø—Ä–æ–º–ø—Ç—ã**  
> **–≠–∫–æ–Ω–æ–º–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**: –¥–æ 99.7%  
> **–í–µ—Ä—Å–∏—è**: 1.0  
> **–î–∞—Ç–∞**: 2025-11-28

---

## üìÅ –§–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –†–∞–∑–º–µ—Ä |
|------|-----------|--------|
| **PROMPT_SNIPPETS.md** | –ü–æ–ª–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è 10 —Å–Ω–∏–ø–ø–µ—Ç–æ–≤ + –ø—Ä–∏–º–µ—Ä—ã | ~600 —Å—Ç—Ä–æ–∫ |
| **QUICK_CARD.md** | –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞ (35 —Å—Ç—Ä–æ–∫) | ~35 —Å—Ç—Ä–æ–∫ |
| **snippets.json** | JSON –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ | JSON |
| **README.md** | –≠—Ç–æ—Ç —Ñ–∞–π–ª | ~100 —Å—Ç—Ä–æ–∫ |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (35 —Å—Ç—Ä–æ–∫)

–°–∫–æ–ø–∏—Ä—É–π **QUICK_CARD.md** –≤ —Å–≤–æ–π –ø—Ä–æ–º–ø—Ç:

```markdown
Implement AsyncCreateAccount use case.

[–í—Å—Ç–∞–≤–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ QUICK_CARD.md]

Requirements: ...
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 35 —Å—Ç—Ä–æ–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤–º–µ—Å—Ç–æ 10,614 (**99.7% —ç–∫–æ–Ω–æ–º–∏—è**)

---

### 2. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (150 —Å—Ç—Ä–æ–∫)

–ò—Å–ø–æ–ª—å–∑—É–π –Ω—É–∂–Ω—ã–µ —Å–Ω–∏–ø–ø–µ—Ç—ã –∏–∑ **PROMPT_SNIPPETS.md**:

```markdown
Implement AsyncCreateAccount use case.

[Snippet 1: –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞]
[Snippet 2: –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø–æ—Ä—Ç–æ–≤]
[Snippet 3: –û—Å–Ω–æ–≤–Ω—ã–µ DTOs]
[Snippet 6: –ü–∞—Ç—Ç–µ—Ä–Ω use case]

Requirements: ...
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 150 —Å—Ç—Ä–æ–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (**98.6% —ç–∫–æ–Ω–æ–º–∏—è**)

---

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–Ω–∏–ø–ø–µ—Ç—ã

### –ò–∑ PROMPT_SNIPPETS.md

1. **–ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** (15 —Å—Ç—Ä–æ–∫) - –æ–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
2. **–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø–æ—Ä—Ç–æ–≤** (25 —Å—Ç—Ä–æ–∫) - AsyncUnitOfWork, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
3. **–û—Å–Ω–æ–≤–Ω—ã–µ DTOs** (35 —Å—Ç—Ä–æ–∫) - EntryLineDTO, TransactionDTO, AccountDTO
4. **–ö–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è** (25 —Å—Ç—Ä–æ–∫) - money_quantize, rate_quantize
5. **–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–æ–º–µ–Ω–∞** (30 —Å—Ç—Ä–æ–∫) - double-entry, validation rules
6. **–ü–∞—Ç—Ç–µ—Ä–Ω use case** (55 —Å—Ç—Ä–æ–∫) - template –¥–ª—è –Ω–æ–≤–æ–≥–æ use case
7. **Data Flow Template** (45 —Å—Ç—Ä–æ–∫) - –ø–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º
8. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** (40 —Å—Ç—Ä–æ–∫) - layer rules
9. **–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏** (50 —Å—Ç—Ä–æ–∫) - —á—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å
10. **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç** (90 —Å—Ç—Ä–æ–∫) - –≤—Å–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –≤ –æ–¥–Ω–æ–º

---

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤—ã–π use case

**–§–∞–π–ª—ã**: PROMPT_SNIPPETS.md (Snippets 1, 2, 3, 5, 6)  
**–ö–æ–Ω—Ç–µ–∫—Å—Ç**: ~150 —Å—Ç—Ä–æ–∫  
**–≠–∫–æ–Ω–æ–º–∏—è**: 98.6%

**–ü—Ä–æ–º–ø—Ç**:
```markdown
Implement AsyncCreateAccount use case for py_accountant.

[Snippet 1: –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞]
[Snippet 2: –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø–æ—Ä—Ç–æ–≤]
[Snippet 3: –û—Å–Ω–æ–≤–Ω—ã–µ DTOs]
[Snippet 5: –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–æ–º–µ–Ω–∞]
[Snippet 6: –ü–∞—Ç—Ç–µ—Ä–Ω use case]

Requirements:
- Create account with full_name and currency_code
- Validate full_name format (TYPE:NAME)
- Check currency exists
- Return AccountDTO
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞

**–§–∞–π–ª—ã**: QUICK_CARD.md  
**–ö–æ–Ω—Ç–µ–∫—Å—Ç**: ~35 —Å—Ç—Ä–æ–∫  
**–≠–∫–æ–Ω–æ–º–∏—è**: 99.7%

**–ü—Ä–æ–º–ø—Ç**:
```markdown
Add validation to AsyncPostTransaction.

[–í—Å—Ç–∞–≤–∏—Ç—å QUICK_CARD.md]

Current code: [–∫–æ–¥]
Add check for negative amounts.
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞

**–§–∞–π–ª—ã**: PROMPT_SNIPPETS.md (Snippet 10: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç)  
**–ö–æ–Ω—Ç–µ–∫—Å—Ç**: ~90 —Å—Ç—Ä–æ–∫  
**–≠–∫–æ–Ω–æ–º–∏—è**: 99.2%

**–ü—Ä–æ–º–ø—Ç**:
```markdown
Implement trading balance with FX conversion.

[Snippet 10: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç]

Requirements:
- Aggregate ASSET accounts
- Convert to base currency
- Return TradingBalanceDetailedDTO
```

---

## üíª –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Python

```python
import json

# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–Ω–∏–ø–ø–µ—Ç—ã
with open('ai_context/snippets/snippets.json') as f:
    snippets = json.load(f)

# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–Ω–∏–ø–ø–µ—Ç
quantization = next(s for s in snippets['snippets'] if s['id'] == 'quantization')
print(quantization['content'])

# –ü–æ–ª—É—á–∏—Ç—å —Å–Ω–∏–ø–ø–µ—Ç—ã –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏—è
scenario = next(s for s in snippets['scenarios'] if s['name'] == '–ù–æ–≤—ã–π use case')
for snippet_id in scenario['snippets']:
    snippet = next(s for s in snippets['snippets'] if s['id'] == snippet_id)
    print(f"\n=== {snippet['name']} ===")
    print(snippet['content'])
```

---

### Bash

```bash
# –í—ã–≤–µ—Å—Ç–∏ Quick Card
cat ai_context/snippets/QUICK_CARD.md

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å Quick Card –≤ –±—É—Ñ–µ—Ä (macOS)
cat ai_context/snippets/QUICK_CARD.md | pbcopy

# –ò–∑–≤–ª–µ—á—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–Ω–∏–ø–ø–µ—Ç
grep -A 30 "## Snippet 6: –ü–∞—Ç—Ç–µ—Ä–Ω use case" \
  ai_context/snippets/PROMPT_SNIPPETS.md

# –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–Ω–∏–ø–ø–µ—Ç–æ–≤
for num in 1 2 3 6; do
  grep -A 30 "## Snippet $num:" ai_context/snippets/PROMPT_SNIPPETS.md
  echo -e "\n---\n"
done
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —ç–∫–æ–Ω–æ–º–∏–∏

| –°—Ü–µ–Ω–∞—Ä–∏–π | –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ | –°–æ —Å–Ω–∏–ø–ø–µ—Ç–∞–º–∏ | –≠–∫–æ–Ω–æ–º–∏—è |
|----------|-------------|---------------|----------|
| –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç | 10,614 —Å—Ç—Ä–æ–∫ | 35 —Å—Ç—Ä–æ–∫ | **99.7%** |
| –ù–æ–≤—ã–π use case | 10,614 —Å—Ç—Ä–æ–∫ | 150 —Å—Ç—Ä–æ–∫ | **98.6%** |
| –î–æ—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–¥–∞ | 10,614 —Å—Ç—Ä–æ–∫ | 110 —Å—Ç—Ä–æ–∫ | **99.0%** |
| –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ | 10,614 —Å—Ç—Ä–æ–∫ | 80 —Å—Ç—Ä–æ–∫ | **99.2%** |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ–≤—å—é | 10,614 —Å—Ç—Ä–æ–∫ | 55 —Å—Ç—Ä–æ–∫ | **99.5%** |
| –°–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞ | 10,614 —Å—Ç—Ä–æ–∫ | 90 —Å—Ç—Ä–æ–∫ | **99.2%** |

**–°—Ä–µ–¥–Ω—è—è —ç–∫–æ–Ω–æ–º–∏—è**: **99.2%**

---

## üéì Best Practices

### 1. –ù–∞—á–Ω–∏ —Å –º–∏–Ω–∏–º—É–º–∞
–ò—Å–ø–æ–ª—å–∑—É–π **QUICK_CARD.md** (35 —Å—Ç—Ä–æ–∫) –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á.

### 2. –î–æ–±–∞–≤–ª—è–π –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –¥–æ–±–∞–≤—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–Ω–∏–ø–ø–µ—Ç—ã –∏–∑ **PROMPT_SNIPPETS.md**.

### 3. –ù–µ –¥—É–±–ª–∏—Ä—É–π
–ù–µ –≤—Å—Ç–∞–≤–ª—è–π –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Å–Ω–∏–ø–ø–µ—Ç–æ–≤.

### 4. –ö–æ–º–±–∏–Ω–∏—Ä—É–π
–û–±—ä–µ–¥–∏–Ω—è–π —Å–Ω–∏–ø–ø–µ—Ç—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á (—Å–º. –°—Ü–µ–Ω–∞—Ä–∏–π 1).

### 5. –ü—Ä–æ–≤–µ—Ä—è–π –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å
–°–Ω–∏–ø–ø–µ—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å ai_context –≤–µ—Ä—Å–∏–∏ 1.1.0.

---

## üîó –°–º. —Ç–∞–∫–∂–µ

- **../INDEX.yaml** - –ø–æ–ª–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ AI context
- **../contracts/** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã (PORTS, DTOS, DOMAIN_RULES)
- **../flows/** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ data flows –¥–ª—è use cases
- **../README.md** - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è AI context
- **../../docs/AI_CONTEXT_OPTIMIZATION.md** - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–Ω–∏–ø–ø–µ—Ç–æ–≤

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞:

1. –û–±–Ω–æ–≤–∏—Ç—å **ai_context/contracts/** –∏–ª–∏ **ai_context/flows/**
2. –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–Ω–∏–ø–ø–µ—Ç—ã –≤ **PROMPT_SNIPPETS.md**
3. –û–±–Ω–æ–≤–∏—Ç—å **snippets.json** –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å **QUICK_CARD.md** –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é:
```bash
python tools/generate_ai_context.py --snippets
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-11-28  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: Production Ready ‚úÖ

