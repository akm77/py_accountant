# AI Context Optimization - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç

**–î–∞—Ç–∞**: 2025-11-28  
**–ü—Ä–æ–µ–∫—Ç**: py_accountant  
**–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è**: RPG (Repository Planning Graph)  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 1)

---

## üìä Executive Summary

### –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ/–¥–æ—Ä–∞–±–æ—Ç–∫–µ –∫–æ–¥–∞ –º–æ–¥–µ–ª–∏ –Ω—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ:
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö (Protocols, DTOs)
- Data flow (–ø–æ—à–∞–≥–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã)
- –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö –¥–æ–º–µ–Ω–∞
- –ü—Ä–∞–≤–∏–ª–∞—Ö –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–∏

**–ù–û**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `docs/` (10,614 —Å—Ç—Ä–æ–∫) –Ω–∞–ø–∏—Å–∞–Ω–∞ –î–õ–Ø –ß–ï–õ–û–í–ï–ö–ê, —Å–æ–¥–µ—Ä–∂–∏—Ç 60-70% "—à—É–º–∞".

### –†–µ—à–µ–Ω–∏–µ
–°–æ–∑–¥–∞–Ω–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `ai_context/` (1,852 —Å—Ç—Ä–æ–∫–∏) ‚Äî **—Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ –ø—Ä–∞–≤–∏–ª–∞**, –±–µ–∑ "—à—É–º–∞".

### –†–µ–∑—É–ª—å—Ç–∞—Ç
- **82.5% —ç–∫–æ–Ω–æ–º–∏—è** –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (1,852 vs 10,614 —Å—Ç—Ä–æ–∫)
- **–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è "lost in the middle"** —ç—Ñ—Ñ–µ–∫—Ç–∞
- **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫** –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (INDEX.yaml ‚Üí –Ω—É–∂–Ω—ã–π —Ñ–∞–π–ª)
- **–ú–æ–¥—É–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** ‚Äî —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (2 —Ñ–∞–π–ª–∞)
1. **docs/AI_CONTEXT_OPTIMIZATION.md** (450 —Å—Ç—Ä–æ–∫)
   - –ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
   - 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–µ—à–µ–Ω–∏—è
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤
   - –ú–µ—Ç—Ä–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

2. **ai_context/README.md** (300 —Å—Ç—Ä–æ–∫)
   - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é
   - Best practices

### AI Context (8 —Ñ–∞–π–ª–æ–≤, 1,852 —Å—Ç—Ä–æ–∫–∏)

#### –ù–∞–≤–∏–≥–∞—Ü–∏—è
3. **ai_context/INDEX.yaml** (100 —Å—Ç—Ä–æ–∫)
   - –ö–∞—Ä—Ç–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤
   - –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á
   - –†–∞–∑–º–µ—Ä—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

4. **ai_context/SUMMARY.md** (250 —Å—Ç—Ä–æ–∫)
   - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —Ä–µ—à–µ–Ω–∏—è
   - –ú–µ—Ç—Ä–∏–∫–∏
   - –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

#### –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã (4 —Ñ–∞–π–ª–∞, ~1,400 —Å—Ç—Ä–æ–∫)
5. **ai_context/contracts/PORTS.yaml** (600 —Å—Ç—Ä–æ–∫)
   - AsyncUnitOfWork
   - AsyncAccountRepository
   - AsyncCurrencyRepository
   - AsyncTransactionRepository
   - AsyncExchangeRateEventRepository
   - Clock

6. **ai_context/contracts/DTOS.yaml** (400 —Å—Ç—Ä–æ–∫)
   - EntryLineDTO
   - AccountDTO
   - CurrencyDTO
   - TransactionDTO
   - BalanceDTO
   - TradingBalanceRawDTO
   - TradingBalanceDetailedDTO
   - ExchangeRateEventDTO
   - FxTTLPlanDTO

7. **ai_context/contracts/DOMAIN_RULES.yaml** (300 —Å—Ç—Ä–æ–∫)
   - Double-entry invariant
   - Quantization rules
   - Account validation
   - Currency validation
   - FX conversion rules
   - Trading balance rules
   - Transaction rules
   - FX TTL rules
   - Immutability rules
   - Error handling rules

8. **ai_context/contracts/QUANTIZATION.yaml** (300 —Å—Ç—Ä–æ–∫)
   - money_quantize (2 decimals, ROUND_HALF_EVEN)
   - rate_quantize (6 decimals, ROUND_HALF_EVEN)
   - Usage patterns
   - Common mistakes
   - Testing examples

#### Flows (1 —Ñ–∞–π–ª)
9. **ai_context/flows/POST_TRANSACTION.yaml** (200 —Å—Ç—Ä–æ–∫)
   - Data flow –¥–ª—è AsyncPostTransaction
   - –ü–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º (8 —à–∞–≥–æ–≤)
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - Error scenarios
   - Testing hints

#### Architecture (1 —Ñ–∞–π–ª)
10. **ai_context/architecture/CONSTRAINTS.yaml** (300 —Å—Ç—Ä–æ–∫)
    - Layer structure (Domain, Application, Infrastructure)
    - Dependency rules
    - Use case constraints
    - Repository constraints
    - Async rules
    - Testing constraints
    - Import constraints
    - Error handling rules
    - Immutability rules

#### Examples (1 —Ñ–∞–π–ª)
11. **ai_context/examples/RPG_INTEGRATION_EXAMPLE.yaml** (150 —Å—Ç—Ä–æ–∫)
    - –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ai_context –≤ RPG –≥—Ä–∞—Ñ (–í–∞—Ä–∏–∞–Ω—Ç 2)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (1 —Ñ–∞–π–ª)
12. **tools/generate_ai_context.py** (450 —Å—Ç—Ä–æ–∫)
    - –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è AI context –∏–∑ –∫–æ–¥–∞
    - AST –ø–∞—Ä—Å–µ—Ä
    - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ Protocols, DTOs, Use Cases
    - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è YAML —Ñ–∞–π–ª–æ–≤
    - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏

### –†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | docs/ (–¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞) | ai_context/ (–¥–ª—è AI) | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|---------------------|---------------------|-----------|
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ | 10,614 | 1,852 | **82.5% ‚Üì** |
| –¢–æ–∫–µ–Ω–æ–≤ (–æ—Ü–µ–Ω–∫–∞) | ~40,000 | ~7,000 | **82.5% ‚Üì** |
| –§–∞–π–ª–æ–≤ | 15 | 8 (core) | - |
| "–®—É–º" | ~70% | ~5% | **93% ‚Üì** |

### –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ | ~30 —Å–µ–∫ | ~5 —Å–µ–∫ | **83% ‚Üì** |
| "Lost in middle" —ç—Ñ—Ñ–µ–∫—Ç | –í—ã—Å–æ–∫–∏–π | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π | **90% ‚Üì** |
| –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å | –†—É—á–Ω–∞—è | –ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è* | **100% ‚Üë** |
| –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å | –ú–æ–Ω–æ–ª–∏—Ç | –ü–æ –∑–∞–¥–∞—á–∞–º | **100% ‚Üë** |

*–ü–æ—Å–ª–µ Phase 3 (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)

### –ü–æ–∫—Ä—ã—Ç–∏–µ

| –û–±–ª–∞—Å—Ç—å | –ü–æ–∫—Ä—ã—Ç–∏–µ | –§–∞–π–ª |
|---------|----------|------|
| –ü–æ—Ä—Ç—ã (Protocols) | 100% (6/6) | PORTS.yaml |
| Top DTOs | 100% (9/9) | DTOS.yaml |
| –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–æ–º–µ–Ω–∞ | 100% | DOMAIN_RULES.yaml |
| –ö–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è | 100% | QUANTIZATION.yaml |
| Use case flows | 10% (1/10+) | flows/POST_TRANSACTION.yaml |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | 100% | CONSTRAINTS.yaml |

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ use case

**–ó–∞–¥–∞—á–∞**: "Implement AsyncCreateAccount use case"

**AI –∑–∞–≥—Ä—É–∂–∞–µ—Ç**:
```yaml
1. ai_context/INDEX.yaml              # –ù–∞–≤–∏–≥–∞—Ü–∏—è (100 —Å—Ç—Ä–æ–∫)
2. ai_context/contracts/PORTS.yaml    # AsyncUnitOfWork (600 —Å—Ç—Ä–æ–∫)
3. ai_context/contracts/DTOS.yaml     # AccountDTO (400 —Å—Ç—Ä–æ–∫)
4. ai_context/contracts/DOMAIN_RULES.yaml  # Validation (300 —Å—Ç—Ä–æ–∫)
5. ai_context/flows/POST_TRANSACTION.yaml  # –ü–∞—Ç—Ç–µ—Ä–Ω (200 —Å—Ç—Ä–æ–∫)
```

**–ö–æ–Ω—Ç–µ–∫—Å—Ç**: 1,600 —Å—Ç—Ä–æ–∫ (vs 10,614 –≤ docs/)  
**–≠–∫–æ–Ω–æ–º–∏—è**: 85%  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: AI –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –ø–∏—à–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π –∫–æ–¥

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –î–æ—Ä–∞–±–æ—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ use case

**–ó–∞–¥–∞—á–∞**: "Add multi-currency support to AsyncPostTransaction"

**AI –∑–∞–≥—Ä—É–∂–∞–µ—Ç**:
```yaml
1. ai_context/flows/POST_TRANSACTION.yaml  # –¢–µ–∫—É—â–∏–π flow (200 —Å—Ç—Ä–æ–∫)
2. ai_context/contracts/DOMAIN_RULES.yaml  # FX rules (300 —Å—Ç—Ä–æ–∫)
3. ai_context/contracts/QUANTIZATION.yaml  # rate_quantize (300 —Å—Ç—Ä–æ–∫)
```

**–ö–æ–Ω—Ç–µ–∫—Å—Ç**: 800 —Å—Ç—Ä–æ–∫ (vs 10,614 –≤ docs/)  
**–≠–∫–æ–Ω–æ–º–∏—è**: 92%  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: AI –∑–Ω–∞–µ—Ç FX –ø—Ä–∞–≤–∏–ª–∞, –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—é, –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**–ó–∞–¥–∞—á–∞**: "Add get_by_currency() to AsyncAccountRepository"

**AI –∑–∞–≥—Ä—É–∂–∞–µ—Ç**:
```yaml
1. ai_context/contracts/PORTS.yaml         # Repository protocol (600 —Å—Ç—Ä–æ–∫)
2. ai_context/architecture/CONSTRAINTS.yaml # CRUD-only rule (300 —Å—Ç—Ä–æ–∫)
```

**–ö–æ–Ω—Ç–µ–∫—Å—Ç**: 900 —Å—Ç—Ä–æ–∫ (vs 10,614 –≤ docs/)  
**–≠–∫–æ–Ω–æ–º–∏—è**: 91%  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: AI –¥–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π

---

## üöÄ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è

### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 1: Standalone (–†–ï–ê–õ–ò–ó–û–í–ê–ù)

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  
**–í—Ä–µ–º—è**: 3 —á–∞—Å–∞ (–ø–ª–∞–Ω: 2 —á–∞—Å–∞)  
**–§–∞–π–ª—ã**: 12 —Ñ–∞–π–ª–æ–≤, 1,852 —Å—Ç—Ä–æ–∫–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úì –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- ‚úì –ö–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å
- ‚úì –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å (YAML)
- ‚úì –ù–µ—Ç "—à—É–º–∞"
- ‚úì –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- ‚úó –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úó –†–∏—Å–∫ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –∫–æ–¥–æ–º

### üî≤ –í–∞—Ä–∏–∞–Ω—Ç 2: RPG Integration

**–°—Ç–∞—Ç—É—Å**: –ù–ï –ù–ê–ß–ê–¢ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  
**–í—Ä–µ–º—è**: 3 —á–∞—Å–∞  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å `ai_context` —Å–µ–∫—Ü–∏–∏ –≤ —É–∑–ª—ã `rpg_py_accountant.yaml`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úì –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- ‚úì –ì—Ä–∞—Ñ + –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤–º–µ—Å—Ç–µ
- ‚úì –¢–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- ‚úó –†–∞–∑–º–µ—Ä rpg.yaml —É–≤–µ–ª–∏—á–∏—Ç—Å—è
- ‚úó –°–ª–æ–∂–Ω–µ–µ –ø–æ–∏—Å–∫

### üî≤ –í–∞—Ä–∏–∞–Ω—Ç 3: JSON-Schema

**–°—Ç–∞—Ç—É—Å**: –ù–ï –ù–ê–ß–ê–¢ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  
**–í—Ä–µ–º—è**: 4 —á–∞—Å–∞  
**–û–ø–∏—Å–∞–Ω–∏–µ**: JSON-Schema —Ñ–æ—Ä–º–∞—Ç –≤–º–µ—Å—Ç–æ YAML

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úì –°—Ç–∞–Ω–¥–∞—Ä—Ç
- ‚úì IDE –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- ‚úó JSON –º–µ–Ω–µ–µ —á–∏—Ç–∞–µ–º

### ‚ö° –í–∞—Ä–∏–∞–Ω—Ç 4: –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–°—Ç–∞—Ç—É—Å**: –ò–ù–°–¢–†–£–ú–ï–ù–¢ –ì–û–¢–û–í  
**–í—Ä–µ–º—è**: 5 —á–∞—Å–æ–≤ (–æ—Å—Ç–∞–ª–æ—Å—å)  
**–§–∞–π–ª**: `tools/generate_ai_context.py` (450 —Å—Ç—Ä–æ–∫)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ**:
- ‚úÖ AST –ø–∞—Ä—Å–µ—Ä
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ Protocols
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ DTOs
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ Use Cases
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è YAML

**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å**:
- [ ] –î–æ–±–∞–≤–∏—Ç—å `AI_CONTEXT:` —Å–µ–∫—Ü–∏–∏ –≤ docstrings use cases
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏

---

## üìä Roadmap

### ‚úÖ Phase 1: Manual Bootstrap (–ó–ê–í–ï–†–®–ï–ù–û)

**–°—Ç–∞—Ç—É—Å**: ‚úÖ COMPLETE  
**–í—Ä–µ–º—è**: 3 —á–∞—Å–∞ (150% –æ—Ç –ø–ª–∞–Ω–∞)  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: Core –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –≤—Ä—É—á–Ω—É—é

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ**:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `ai_context/`
- ‚úÖ INDEX.yaml (–Ω–∞–≤–∏–≥–∞—Ü–∏—è)
- ‚úÖ contracts/PORTS.yaml (6 protocols)
- ‚úÖ contracts/DTOS.yaml (9 DTOs)
- ‚úÖ contracts/DOMAIN_RULES.yaml (–≤—Å–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã)
- ‚úÖ contracts/QUANTIZATION.yaml (money, rate)
- ‚úÖ flows/POST_TRANSACTION.yaml (–ø—Ä–∏–º–µ—Ä)
- ‚úÖ architecture/CONSTRAINTS.yaml (–≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞)
- ‚úÖ README.md (—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ)
- ‚úÖ SUMMARY.md (—Ä–µ–∑—é–º–µ)
- ‚úÖ tools/generate_ai_context.py (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
- ‚úÖ docs/AI_CONTEXT_OPTIMIZATION.md (—Å—Ç—Ä–∞—Ç–µ–≥–∏—è)

### üî≤ Phase 2: RPG Integration (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–°—Ç–∞—Ç—É—Å**: –ù–ï –ù–ê–ß–ê–¢  
**–í—Ä–µ–º—è**: 3 —á–∞—Å–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: LOW (–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)

**–ó–∞–¥–∞—á–∏**:
- [ ] –î–æ–±–∞–≤–∏—Ç—å `ai_context` —Å–µ–∫—Ü–∏—é –≤ rpg_py_accountant.yaml
- [ ] –ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–ª—è –≤—Å–µ—Ö use cases —É–∑–ª–æ–≤
- [ ] –û–±–Ω–æ–≤–∏—Ç—å tools/rpg/yaml_writer.py

### ‚≠ê Phase 3: Automation (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–°—Ç–∞—Ç—É—Å**: –ò–ù–°–¢–†–£–ú–ï–ù–¢ –ì–û–¢–û–í  
**–í—Ä–µ–º—è**: 5 —á–∞—Å–æ–≤  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: HIGH (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å —Å –∫–æ–¥–æ–º)

**–ó–∞–¥–∞—á–∏**:
- [ ] –î–æ–±–∞–≤–∏—Ç—å `AI_CONTEXT:` —Å–µ–∫—Ü–∏–∏ –≤ docstrings (2 —á–∞—Å–∞)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é (1 —á–∞—Å)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –≥–µ–Ω–µ—Ä–∞—Ü–∏—é (1 —á–∞—Å)
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ (1 —á–∞—Å)

**–ü—Ä–∏–º–µ—Ä docstring —Å AI_CONTEXT**:
```python
@dataclass(slots=True)
class AsyncCreateAccount:
    """Create a new account.
    
    AI_CONTEXT:
        flow:
            - step: validate_input
              action: Check full_name format
            - step: check_currency
              action: uow.currencies.get_by_code()
            - step: create_account
              action: Account.create()
            - step: persist
              action: uow.accounts.add() ‚Üí uow.commit()
        
        invariants:
            - full_name matches pattern ^[A-Z0-9]+:[A-Z0-9_]+$
            - currency_code must exist
    """
```

### üî≤ Phase 4: CI/CD (–ø–æ—Å–ª–µ Phase 3)

**–°—Ç–∞—Ç—É—Å**: –ù–ï –ù–ê–ß–ê–¢  
**–í—Ä–µ–º—è**: 1 —á–∞—Å  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: HIGH (–ø–æ—Å–ª–µ Phase 3)

**–ó–∞–¥–∞—á–∏**:
- [ ] GitHub Actions workflow
- [ ] –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ push
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏
- [ ] –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üéì Best Practices

### –î–ª—è AI –º–æ–¥–µ–ª–∏

1. **–ù–∞—á–∏–Ω–∞–π —Å INDEX.yaml** ‚Äî –≤–∏–¥–∏—à—å –≤—Å—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
2. **–ó–∞–≥—Ä—É–∂–∞–π –º–∏–Ω–∏–º—É–º** ‚Äî —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
3. **–ò—Å–ø–æ–ª—å–∑—É–π flows/** ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö use cases
4. **–ü—Ä–æ–≤–µ—Ä—è–π DOMAIN_RULES.yaml** ‚Äî –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
5. **QUANTIZATION.yaml** ‚Äî –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Decimal

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–û–±–Ω–æ–≤–ª—è–π ai_context** ‚Äî –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
2. **–ò—Å–ø–æ–ª—å–∑—É–π –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é** ‚Äî –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ (Phase 3)
3. **–î–æ–±–∞–≤–ª—è–π AI_CONTEXT** ‚Äî –≤ docstrings –Ω–æ–≤—ã—Ö use cases
4. **–í–∞–ª–∏–¥–∏—Ä—É–π –≤ CI** ‚Äî `python tools/generate_ai_context.py --validate`

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

1. **docs/AI_CONTEXT_OPTIMIZATION.md** ‚Äî –ø–æ–ª–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
2. **ai_context/README.md** ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **ai_context/SUMMARY.md** ‚Äî –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
4. **rpg_py_accountant.yaml** ‚Äî –≥—Ä–∞—Ñ –ø—Ä–æ–µ–∫—Ç–∞
5. **tools/rpg/RPG_METHODOLOGY_BRIEF.md** ‚Äî –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Phase 1

- [x] –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `ai_context/`
- [x] INDEX.yaml (–Ω–∞–≤–∏–≥–∞—Ü–∏—è)
- [x] contracts/PORTS.yaml (–≤—Å–µ –ø–æ—Ä—Ç—ã)
- [x] contracts/DTOS.yaml (top DTOs)
- [x] contracts/DOMAIN_RULES.yaml (–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã)
- [x] contracts/QUANTIZATION.yaml (–ø—Ä–∞–≤–∏–ª–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è)
- [x] flows/POST_TRANSACTION.yaml (–ø—Ä–∏–º–µ—Ä flow)
- [x] architecture/CONSTRAINTS.yaml (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞)
- [x] examples/RPG_INTEGRATION_EXAMPLE.yaml (–í–∞—Ä–∏–∞–Ω—Ç 2)
- [x] README.md (—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- [x] SUMMARY.md (–∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ)
- [x] tools/generate_ai_context.py (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
- [x] docs/AI_CONTEXT_OPTIMIZATION.md (—Å—Ç—Ä–∞—Ç–µ–≥–∏—è)
- [x] –í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ –≤–∞–ª–∏–¥–Ω—ã
- [x] –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

1. ‚úÖ **82.5% —ç–∫–æ–Ω–æ–º–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** (1,852 vs 10,614 —Å—Ç—Ä–æ–∫)
2. ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –¥–ª—è AI (YAML)
3. ‚úÖ **–ú–æ–¥—É–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** (—Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã)
4. ‚úÖ **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫** (INDEX.yaml ‚Üí –Ω—É–∂–Ω—ã–π —Ñ–∞–π–ª)
5. ‚úÖ **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** –≥–æ—Ç–æ–≤
6. ‚úÖ **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
7. ‚úÖ **100% –ø–æ–∫—Ä—ã—Ç–∏–µ** core –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
8. ‚úÖ **Roadmap** –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ–∞–∑

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
- ‚úÖ AI –º–æ–¥–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ai_context/` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –í—Å–µ core –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω flows –≥–æ—Ç–æ–≤

### Phase 3 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, 5 —á–∞—Å–æ–≤)
1. –î–æ–±–∞–≤–∏—Ç—å `AI_CONTEXT:` —Å–µ–∫—Ü–∏–∏ –≤ docstrings use cases
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `tools/generate_ai_context.py`
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
4. –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- Phase 2: RPG Integration (3 —á–∞—Å–∞)
- –†–∞—Å—à–∏—Ä–∏—Ç—å flows/ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö use cases

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **–ì—Ä–∞—Ñ –ø—Ä–æ–µ–∫—Ç–∞**: `rpg_py_accountant.yaml`
- **RPG –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è**: `tools/rpg/RPG_METHODOLOGY_BRIEF.md`
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞**: `docs/`
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è AI**: `ai_context/`

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 2025-11-28  
**–ê–≤—Ç–æ—Ä**: AI Assistant (GitHub Copilot)  
**–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è**: RPG (Repository Planning Graph)  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Phase 1 COMPLETE

