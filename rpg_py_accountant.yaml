rpg:
  metadata:
    project_name: "py_accountant"
    version: "1.1.0"
    description: "–ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: –¥–æ–º–µ–Ω/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ/–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞. –¶–µ–ª—å ‚Äî Clean Architecture —Å core-only –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç—ã –∏ use cases."
    last_updated: "2025-11-26"
    changelog:
      - version: "1.1.0"
        date: "2025-11-26"
        changes:
          - "MIGRATION-API: Wave 3 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ - MigrationRunner core API (8 —á–∞—Å–æ–≤, –Ω–∞ 1 —á–∞—Å —Ä–∞–Ω—å—à–µ –ø–ª–∞–Ω–∞)"
          - "MIGRATION-API: –°–æ–∑–¥–∞–Ω runner.py —Å –∫–ª–∞—Å—Å–æ–º MigrationRunner (170 —Å—Ç—Ä–æ–∫, 9 public methods)"
          - "MIGRATION-API: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã upgrade_to_head(), upgrade_to_version(), downgrade() —Å async/await"
          - "MIGRATION-API: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã get_current_version(), get_pending_migrations(), validate_schema_version()"
          - "MIGRATION-API: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è URL (aiosqlite‚Üísqlite –¥–ª—è Alembic)"
          - "MIGRATION-API: –°–æ–∑–¥–∞–Ω–æ 15 comprehensive unit —Ç–µ—Å—Ç–æ–≤ (–ø—Ä–µ–≤—ã—à–µ–Ω –ø–ª–∞–Ω 8-10 –Ω–∞ 50%)"
          - "MIGRATION-API: –í—Å–µ 15 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (100% pass rate, execution 1.16s)"
          - "MIGRATION-API: Coverage ~95% –¥–ª—è runner.py"
          - "MIGRATION-API: –û–±–Ω–æ–≤–ª—ë–Ω __init__.py —Å —ç–∫—Å–ø–æ—Ä—Ç–∞–º–∏ (MigrationRunner, MigrationError, VersionMismatchError)"
          - "MIGRATION-API: –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è MIGRATION_RUNNER_API.md (quick reference)"
          - "MIGRATION-API: –°–æ–∑–¥–∞–Ω WAVE_3_COMPLETION_REPORT.md (detailed report, 359 lines)"
          - "MIGRATION-API: File-based SQLite testing –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ (tmp_path fixture)"
          - "MIGRATION-API: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ —Ä–µ–∞–ª—å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (0001-0008)"
          - "MIGRATION-API: –û–±–Ω–æ–≤–ª—ë–Ω migration_api_rpg_graph.yaml (Wave 3 status, metrics)"
          - "MIGRATION-API: –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 33% (Wave 1-3 –∏–∑ 9 –∑–∞–≤–µ—Ä—à–µ–Ω—ã)"
          - "MIGRATION-API: Wave 2 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ - Alembic environment (env.py)"
          - "MIGRATION-API: –°–æ–∑–¥–∞–Ω env.py —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –¥—Ä–∞–π–≤–µ—Ä–æ–≤ (150 —Å—Ç—Ä–æ–∫)"
          - "MIGRATION-API: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ lazy initialization –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"
          - "MIGRATION-API: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è get_sync_url() —Å dual-URL –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π"
          - "MIGRATION-API: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã run_migrations_offline() –∏ run_migrations_online()"
          - "MIGRATION-API: –°–æ–∑–¥–∞–Ω–æ 12 comprehensive —Ç–µ—Å—Ç–æ–≤ –¥–ª—è env.py (100% pass)"
          - "MIGRATION-API: Coverage ‚â•95% –¥–ª—è –º–æ–¥—É–ª—è env.py"
          - "MIGRATION-API: Wave 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —à–∞–±–ª–æ–Ω—ã"
          - "MIGRATION-API: –°–æ–∑–¥–∞–Ω—ã errors.py (MigrationError, VersionMismatchError)"
          - "MIGRATION-API: –°–æ–∑–¥–∞–Ω alembic.ini.template —Å —Ä—É—Å—Å–∫–∏–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏"
          - "MIGRATION-API: –°–æ–∑–¥–∞–Ω script.py.mako —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π –∏ docstrings"
          - "MIGRATION-API: –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã 8 –º–∏–≥—Ä–∞—Ü–∏–π –≤ src/py_accountant/infrastructure/migrations/versions/"
          - "MIGRATION-API: –°–æ–∑–¥–∞–Ω–æ 5 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è errors.py (100% pass)"
          - "MIGRATION-API: –û–±–Ω–æ–≤–ª—ë–Ω prompts/migration_api/migration_api_rpg_graph.yaml"
          - "MIGRATION-API: –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 25% (Wave 1-2 –∏–∑ 8 –∑–∞–≤–µ—Ä—à–µ–Ω—ã)"
          - "DOC-REORG: –†–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"
          - "DOC-REORG: –°–æ–∑–¥–∞–Ω–∞ –ø–∞–ø–∫–∞ docs/audit/ (gitignored) –¥–ª—è audit –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤"
          - "DOC-REORG: –ü–µ—Ä–µ–º–µ—â–µ–Ω—ã 20 —Ñ–∞–π–ª–æ–≤ –≤ docs/audit/ (AUDIT_*, SPRINT_*, DOCUMENTATION_*, FINAL_REPORT)"
          - "DOC-REORG: docs/ —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç –¢–û–õ–¨–ö–û –ø—Ä–æ–¥—É–∫—Ç–æ–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (17 files)"
          - "DOC-REORG: –û–±–Ω–æ–≤–ª—ë–Ω .gitignore (docs/audit/ excluded)"
          - "DOC-REORG: –û–±–Ω–æ–≤–ª—ë–Ω INDEX.md (removed audit sections, clean product docs)"
          - "DOC-REORG: –£–ø—Ä–æ—â—ë–Ω CHANGELOG.md (product changes only)"
          - "DOC-REORG: –£–ø—Ä–æ—â—ë–Ω README.md (condensed Documentation Quality section)"
          - "DOC-REORG: –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã (skip docs/audit/, reduced threshold 50‚Üí40)"
          - "DOC-REORG: –í—Å–µ 18 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (0.33s execution time) ‚úÖ"
          - "DOC-REORG: –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: product docs ‚Üî audit materials"
          - "DOC-REORG: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ production use"
          - "DOC-S8: –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–≤–µ—Ä–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –∑–∞–≤–µ—Ä—à–µ–Ω—ã"
          - "DOC-S8: –°–æ–∑–¥–∞–Ω docs/CHANGELOG.md (Keep a Changelog format, S1-S8 history)"
          - "DOC-S8: –°–æ–∑–¥–∞–Ω docs/DOCUMENTATION_UPDATE_REPORT.md (700+ lines, comprehensive report)"
          - "DOC-S8: –û–±–Ω–æ–≤–ª—ë–Ω docs/INDEX.md (version 1.1.0, –∫–∞—á–µ—Å—Ç–≤–æ, –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç)"
          - "DOC-S8: –û–±–Ω–æ–≤–ª—ë–Ω README.md (Documentation Quality section)"
          - "DOC-S8: –î–æ–±–∞–≤–ª–µ–Ω—ã navigation footers –≤ 10+ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"
          - "DOC-S8: –°–æ–∑–¥–∞–Ω docs/SPRINT_S8_COMPLETED.md —Å comprehensive –æ—Ç—á—ë—Ç–æ–º"
          - "DOC-S8: –í—Å–µ 18 —Ç–µ—Å—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç (18 passed, 0 failed) ‚úÖ"
          - "DOC-S8: Integration time: 30 minutes (target achieved, 8x improvement)"
          - "DOC-S8: –û–±–Ω–æ–≤–ª—ë–Ω prompts/sprint_graph.yaml (S8 completed)"
      - version: "1.1.0-S7"
        date: "2025-11-25"
        changes:
          - "DOC-S7: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∞–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"
          - "DOC-S7: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω broken link –≤ FINAL_REPORT.md (–ø—Ä–∏–º–µ—Ä markdown-—Å—Å—ã–ª–∫–∏)"
          - "DOC-S7: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω malformed code block –≤ examples/cli_basic/README.md"
          - "DOC-S7: –í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Ö–æ–¥—è—Ç (18 passed, 0 failed) ‚úÖ"
          - "DOC-S7: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–∞–ª–∏–¥–Ω–∞: code examples, links, imports, config"
          - "DOC-S7: –°–æ–∑–¥–∞–Ω docs/SPRINT_S7_COMPLETED.md —Å –æ—Ç—á—ë—Ç–æ–º –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏"
          - "DOC-S7: –û–±–Ω–æ–≤–ª—ë–Ω prompts/sprint_graph.yaml (S7 completed)"
          - "DOC-S7: –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ syntax errors –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ S6"
      - version: "1.1.0-S6"
        date: "2025-11-25"
        changes:
          - "DOC-S6: –°–æ–∑–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (15 —Ç–µ—Å—Ç–æ–≤)"
          - "DOC-S6: tests/docs/test_code_examples.py ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è 60+ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ (5 —Ç–µ—Å—Ç–æ–≤)"
          - "DOC-S6: tests/docs/test_links.py ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ 50+ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ (4 —Ç–µ—Å—Ç–∞)"
          - "DOC-S6: tests/docs/test_imports.py ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è 20+ –∏–º–ø–æ—Ä—Ç–æ–≤ py_accountant (3 —Ç–µ—Å—Ç–∞)"
          - "DOC-S6: tests/docs/test_config_variables.py ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ 27 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (3 —Ç–µ—Å—Ç–∞)"
          - "DOC-S6: –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ pytest framework"
          - "DOC-S6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è legacy references (sdk, presentation.cli)"
          - "DOC-S6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è async use cases –Ω–∞–¥ sync"
          - "DOC-S6: –°–æ–∑–¥–∞–Ω tests/docs/README.md —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ç–µ—Å—Ç–æ–≤"
          - "DOC-S6: –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç, –æ–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è < 5 —Å–µ–∫—É–Ω–¥"
          - "DOC-S6: –¢–µ—Å—Ç—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –±–∞–≥–∏: 12 syntax errors –≤ API_REFERENCE.md"
          - "DOC-S6: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 2 broken links –≤ docs/AUDIT_PRIORITIES.md"
          - "DOC-S6: –°–æ–∑–¥–∞–Ω docs/SPRINT_S6_COMPLETED.md —Å –æ—Ç—á—ë—Ç–æ–º –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏"
          - "DOC-S6: –û–±–Ω–æ–≤–ª—ë–Ω prompts/sprint_graph.yaml (S6 completed)"
      - version: "1.1.0-S5"
        date: "2025-11-25"
        changes:
          - "DOC-S5: –°–æ–∑–¥–∞–Ω CONFIG_REFERENCE.md ‚Äî –ø–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (2000+ —Å—Ç—Ä–æ–∫)"
          - "DOC-S5: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ 27 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π"
          - "DOC-S5: –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª Configuration Deep Dive –≤ INTEGRATION_GUIDE.md"
          - "DOC-S5: –û–±—ä—è—Å–Ω–µ–Ω–∞ dual-URL architecture (DATABASE_URL + DATABASE_URL_ASYNC)"
          - "DOC-S5: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω docker-compose.yml —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏"
          - "DOC-S5: –°–æ–∑–¥–∞–Ω .env.docker –¥–ª—è Docker –æ–∫—Ä—É–∂–µ–Ω–∏—è"
          - "DOC-S5: –°–æ–∑–¥–∞–Ω tools/validate_config.py –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"
          - "DOC-S5: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è dev/staging/prod –æ–∫—Ä—É–∂–µ–Ω–∏–π"
          - "DOC-S5: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã FX TTL modes (none/delete/archive)"
          - "DOC-S5: –î–æ–±–∞–≤–ª–µ–Ω—ã secrets management –ø—Ä–∏–º–µ—Ä—ã (AWS, K8s, Vault)"
          - "DOC-S5: –î–æ–±–∞–≤–ª–µ–Ω Troubleshooting —Ä–∞–∑–¥–µ–ª —Å —Ç–∏–ø–∏—á–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏"
          - "DOC-S5: –û–±–Ω–æ–≤–ª—ë–Ω docs/INDEX.md —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ CONFIG_REFERENCE.md"
          - "DOC-S5: –û–±–Ω–æ–≤–ª—ë–Ω README.md —Å —Å–µ–∫—Ü–∏–µ–π API –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è"
      - version: "1.1.0-S4"
        date: "2025-11-25"
        changes:
          - "DOC-S4: –°–æ–∑–¥–∞–Ω API_REFERENCE.md ‚Äî –ø–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—É–±–ª–∏—á–Ω–æ–≥–æ API (1500+ —Å—Ç—Ä–æ–∫)"
          - "DOC-S4: –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ 17 async use cases —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º–∏"
          - "DOC-S4: –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ 6 protocols (Clock, AsyncUnitOfWork, AsyncCurrencyRepository, AsyncAccountRepository, AsyncTransactionRepository, AsyncExchangeRateEventsRepository)"
          - "DOC-S4: –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã 14 –æ—Å–Ω–æ–≤–Ω—ã—Ö DTOs —Å –ø–æ–ª—è–º–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"
          - "DOC-S4: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞—Ä—Ç–∞ API: —Ç–∞–±–ª–∏—Ü—ã use cases, protocols, DTOs"
          - "DOC-S4: –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª Migration Guide (sync ‚Üí async)"
          - "DOC-S4: –°–æ–∑–¥–∞–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç generate_api_docs.py –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–∏–≥–Ω–∞—Ç—É—Ä"
          - "DOC-S4: –°–æ–∑–¥–∞–Ω –≤–∞–ª–∏–¥–∞—Ç–æ—Ä extract_and_validate_code_examples.py –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –ø—Ä–∏–º–µ—Ä–æ–≤"
          - "DOC-S4: –û–±–Ω–æ–≤–ª—ë–Ω docs/INDEX.md —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ API_REFERENCE.md"
          - "DOC-S4: –û–±–Ω–æ–≤–ª—ë–Ω README.md —Å —Å–µ–∫—Ü–∏–µ–π Documentation –∏ —Å—Å—ã–ª–∫–æ–π –Ω–∞ API Reference"
      - version: "1.1.0-S3"
        date: "2025-11-25"
        changes:
          - "DOC-S3: –°–æ–∑–¥–∞–Ω CHANGELOG.md –¥–ª—è telegram_bot example (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å async API)"
          - "DOC-S3: –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä FastAPI REST API (examples/fastapi_basic/)"
          - "DOC-S3: –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä CLI —Å Typer (examples/cli_basic/)"
          - "DOC-S3: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ FastAPI –∏ CLI –≤ INTEGRATION_GUIDE.md"
          - "DOC-S3: –û–±–Ω–æ–≤–ª—ë–Ω examples/__init__.py —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –≤—Å–µ—Ö –ø—Ä–∏–º–µ—Ä–æ–≤"
          - "DOC-S3: –í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç async-first API –∏ AsyncSqlAlchemyUnitOfWork"
          - "DOC-S3: –í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –∏–º–µ—é—Ç README.md, requirements.txt –∏ —Ä–∞–±–æ—á–∏–π –∫–æ–¥"
          - "DOC-S3: –ü—Ä–æ–≤–µ—Ä–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Python –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤"
      - version: "1.1.0-S2"
        date: "2025-11-25"
        changes:
          - "DOC-S2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ 6 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º P0 –∏–∑ AUDIT_PRIORITIES.md"
          - "DOC-S2: FX_AUDIT.md ‚Äî –∑–∞–º–µ–Ω–µ–Ω—ã CLI –∫–æ–º–∞–Ω–¥—ã –Ω–∞ Python API (AsyncAddExchangeRateEvent, AsyncListExchangeRateEvents, AsyncPlanFxAuditTTL)"
          - "DOC-S2: RUNNING_MIGRATIONS.md ‚Äî –∑–∞–º–µ–Ω–µ–Ω–∞ CLI –∫–æ–º–∞–Ω–¥–∞ –Ω–∞ Python API (AsyncGetTradingBalanceDetailed)"
          - "DOC-S2: TRADING_WINDOWS.md ‚Äî –∑–∞–º–µ–Ω–µ–Ω—ã CLI –∫–æ–º–∞–Ω–¥—ã –Ω–∞ Python API (AsyncGetTradingBalanceRaw —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤)"
          - "DOC-S2: README.md ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω async –ø—Ä–∏–º–µ—Ä AsyncGetAccountBalance —Ä—è–¥–æ–º —Å sync (deprecated)"
          - "DOC-S2: README.md ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–± async-first –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ deprecation sync API –≤ v2.0.0"
          - "DOC-S2: ARCHITECTURE_OVERVIEW.md ‚Äî —É–¥–∞–ª–µ–Ω—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è Presentation/CLI layer, –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ core-only –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å v1.0.0"
          - "DOC-S2: –£–¥–∞–ª–µ–Ω–æ 6 —Å—Å—ã–ª–æ–∫ –Ω–∞ presentation.cli.main –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"
          - "DOC-S2: –í—Å–µ –ø—Ä–∏–º–µ—Ä—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ async use cases –∏–∑ py_accountant.application.use_cases_async"
      - version: "1.1.0-S1"
        date: "2025-11-25"
        changes:
          - "DOC-S1: –ü—Ä–æ–≤–µ–¥—ë–Ω –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–°–ø—Ä–∏–Ω—Ç S1)"
          - "DOC-S1: –°–æ–∑–¥–∞–Ω–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è 16 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (docs/AUDIT_INVENTORY.md)"
          - "DOC-S1: –ù–∞–π–¥–µ–Ω–æ 11 —É–ø–æ–º–∏–Ω–∞–Ω–∏–π —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ 5 —Ñ–∞–π–ª–∞—Ö (docs/AUDIT_REMOVED_COMPONENTS.md)"
          - "DOC-S1: –°–æ–∑–¥–∞–Ω–∞ –º–∞—Ç—Ä–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è‚Üî–∫–æ–¥ (docs/AUDIT_CODE_MAPPING.md)"
          - "DOC-S1: –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ 42 –ø—Ä–æ–±–ª–µ–º—ã: P0=6, P1=8, P2=15, P3=13 (docs/AUDIT_PRIORITIES.md)"
          - "DOC-S1: –í—ã—è–≤–ª–µ–Ω–æ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π: use cases 44%, protocols 33%, DTOs 30%"
          - "DOC-S1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ö–æ–¥–∫–∏: 4 –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö CLI –ø—Ä–∏–º–µ—Ä–∞, 6 —Å—Å—ã–ª–æ–∫ –Ω–∞ presentation.cli"
      - version: "1.0.2"
        date: "2025-11-25"
        changes:
          - "DOC-GRAPH: –°–æ–∑–¥–∞–Ω –≥—Ä–∞—Ñ —Å–ø—Ä–∏–Ω—Ç–æ–≤ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (prompts/sprint_graph.yaml)"
          - "DOC-GRAPH: –°–æ–∑–¥–∞–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è 8 —Å–ø—Ä–∏–Ω—Ç–æ–≤ (prompts/sprint_*.md)"
          - "DOC-GRAPH: –ö–∞–∂–¥—ã–π –ø—Ä–æ–º–ø—Ç —Å–ª–µ–¥—É–µ—Ç –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ RPG —Å —è–≤–Ω—ã–º–∏ –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ —É—Å–ø–µ—Ö–∞"
          - "DOC-GRAPH: –ü—Ä–æ–º–ø—Ç—ã —Ä–∞–∑–±–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ LLM"
          - "DOC-GRAPH: –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ 50+ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤"
      - version: "1.0.1"
        date: "2025-11-24"
        changes:
          - "DOC-PLAN: –°–æ–∑–¥–∞–Ω –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (DOCUMENTATION_FIX_PROPOSAL.md)"
          - "DOC-PLAN: –í—ã—è–≤–ª–µ–Ω–æ 10 –ø—Ä–æ–±–ª–µ–º –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ core-only"
          - "DOC-PLAN: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–æ 3-—Ñ–∞–∑–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –∏ —Ç–µ—Å—Ç–∞–º–∏"
          - "DOC-PLAN: –î–æ–±–∞–≤–ª–µ–Ω —É–∑–µ–ª 'documentation' –≤ RPG-–≥—Ä–∞—Ñ"
      - version: "1.0.0"
        date: "2025-11-24"
        changes:
          - "–£–¥–∞–ª—ë–Ω —É–∑–µ–ª 'presentation' (—Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä–∞—Ö)"
          - "–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å RPG-–≥—Ä–∞—Ñ–∞"
          - "–£–¥–∞–ª—ë–Ω legacy module application/interfaces/ports.py"
          - "–û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –Ω–∞ application.ports"
      - version: "0.9.0"
        date: "2025-11-23"
        changes:
          - "CORE-01: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ core-only –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é"
          - "I29: –£–¥–∞–ª–µ–Ω–∏–µ legacy sync UoW –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤"
          - "ASYNC-03-06: –ü–æ–ª–Ω—ã–π async API"
    environments:
      - name: "test"
        description: "–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞: –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫, in-memory –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π Postgres, –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏."
        env_vars:
          - name: "ENV"
            required: true
            notes: "ENV=test"
          - name: "DATABASE_URL"
            required: true
            notes: "sqlite+pysqlite:///:memory: –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π Postgres (sync –¥–ª—è Alembic)"
          - name: "DATABASE_URL_ASYNC"
            required: false
            notes: "–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: async runtime URL (postgresql+asyncpg://..., sqlite+aiosqlite:///:memory:)"
          - name: "LOG_LEVEL"
            required: false
            notes: "DEBUG"
          - name: "JSON_LOGS"
            required: false
            notes: "false"
          - name: "LOG_FILE"
            required: false
            notes: "–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ–≤. –í–∫–ª—é—á–∞–µ—Ç —Ñ–∞–π–ª–æ–≤—ã–π —Ö–µ–Ω–¥–ª–µ—Ä —Ç–æ–ª—å–∫–æ –ø—Ä–∏ JSON_LOGS=true."
          - name: "LOG_ROTATION"
            required: false
            notes: "–†–æ—Ç–∞—Ü–∏—è: 'time' (–ø–æ –≤—Ä–µ–º–µ–Ω–∏, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ 'size' (–ø–æ —Ä–∞–∑–º–µ—Ä—É)."
          - name: "LOG_MAX_BYTES"
            required: false
            notes: "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–¥–ª—è 'size'), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10MiB."
          - name: "LOG_BACKUP_COUNT"
            required: false
            notes: "–ß–∏—Å–ª–æ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7."
          - name: "LOG_ROTATE_WHEN"
            required: false
            notes: "–ì—Ä–∞–Ω—É–ª—è—Ä–Ω–æ—Å—Ç—å –¥–ª—è 'time' (–Ω–∞–ø—Ä–∏–º–µ—Ä 'midnight')."
          - name: "LOG_ROTATE_UTC"
            required: false
            notes: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UTC –¥–ª—è —Ç–∞–π–º-—Ä–æ—Ç–∞—Ü–∏–∏ (true –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)."
          - name: "FX_TTL_MODE"
            required: false
            notes: "none|delete|archive (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é none)"
          - name: "FX_TTL_RETENTION_DAYS"
            required: false
            notes: "–ß–∏—Å–ª–æ –¥–Ω–µ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä 90)"
          - name: "FX_TTL_BATCH_SIZE"
            required: false
            notes: "–†–∞–∑–º–µ—Ä –ø–∞—Ä—Ç–∏–∏ TTL/–∞—Ä—Ö–∏–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä 1000)"
          - name: "FX_TTL_DRY_RUN"
            required: false
            notes: "–°—É—Ö–æ–π –ø—Ä–æ–≥–æ–Ω, –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –ë–î"
      - name: "production"
        description: "–ü—Ä–æ–¥–∞–∫—à–µ–Ω: Postgres, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON-–ª–æ–≥–∏, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞."
        env_vars:
          - name: "ENV"
            required: true
            notes: "ENV=production"
          - name: "DATABASE_URL"
            required: true
            notes: "postgresql+psycopg://... (–¥–ª—è Alembic –º–∏–≥—Ä–∞—Ü–∏–π)"
          - name: "DATABASE_URL_ASYNC"
            required: true
            notes: "postgresql+asyncpg://... (runtime)"
          - name: "LOG_LEVEL"
            required: true
            notes: "INFO –∏–ª–∏ WARN"
          - name: "JSON_LOGS"
            required: true
            notes: "true"
          - name: "LOG_FILE"
            required: false
            notes: "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞ –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏ JSON –ª–æ–≥–æ–≤."
          - name: "LOG_ROTATION"
            required: false
            notes: "'time' (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ä–æ—Ç–∞—Ü–∏—è –≤ –ø–æ–ª–Ω–æ—á—å) –∏–ª–∏ 'size'."
          - name: "LOG_MAX_BYTES"
            required: false
            notes: "–†–∞–∑–º–µ—Ä –¥–ª—è 'size' —Ä–æ—Ç–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä 10485760 –¥–ª—è 10MiB)."
          - name: "LOG_BACKUP_COUNT"
            required: false
            notes: "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä—Ö–∏–≤–æ–≤ –ª–æ–≥–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 7)."
          - name: "LOG_ROTATE_WHEN"
            required: false
            notes: "–ü–µ—Ä–∏–æ–¥ —Ä–æ—Ç–∞—Ü–∏–∏ –ø—Ä–∏ 'time' (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é midnight)."
          - name: "LOG_ROTATE_UTC"
            required: false
            notes: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UTC (true) –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è."
          - name: "FX_TTL_MODE"
            required: false
            notes: "–†–µ–∂–∏–º TTL –¥–ª—è exchange_rate_events: none|delete|archive"
          - name: "FX_TTL_RETENTION_DAYS"
            required: false
            notes: "–ü–æ—Ä–æ–≥ –¥–∞–≤–Ω–æ—Å—Ç–∏ –≤ –¥–Ω—è—Ö (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ 90+)"
          - name: "FX_TTL_BATCH_SIZE"
            required: false
            notes: "–†–∞–∑–º–µ—Ä –ø–∞—Ä—Ç–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000)"
          - name: "FX_TTL_DRY_RUN"
            required: false
            notes: "–°—É—Ö–æ–π –ø—Ä–æ–≥–æ–Ω, –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –ë–î"

  nodes:
    modules:
      - name: "application"
        path: "src/py_accountant/application"
        description: "–°—Ü–µ–Ω–∞—Ä–∏–∏ (use cases), DTO –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ—Ä—Ç–æ–≤ (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, U–æW, Clock) –¥–ª—è core-only –ø–∞–∫–µ—Ç–∞ `py_accountant`. –ò–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç —Ç–æ–ª—å–∫–æ py_accountant.application.*."
      - name: "use_cases_async"
        path: "src/py_accountant/application/use_cases_async"
        description: "Async use cases: currencies/accounts/ledger/trading/fx audit (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ sync)."
      - name: "domain"
        path: "src/py_accountant/domain"
        description: "–ß–∏—Å—Ç—ã–π –¥–æ–º–µ–Ω: value-–æ–±—ä–µ–∫—Ç—ã, –∞–≥—Ä–µ–≥–∞—Ç—ã, —Å–µ—Ä–≤–∏—Å—ã (–±–∞–ª–∞–Ω—Å, –∫—É—Ä—Å—ã)."
      - name: "domain.errors"
        path: "src/py_accountant/domain/errors.py"
        description: "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–æ–º–µ–Ω–∞: DomainError, ValidationError (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)."
      - name: "domain.quantize"
        path: "src/py_accountant/domain/quantize.py"
        description: "–£—Ç–∏–ª–∏—Ç—ã –∫–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏—è: money_quantize, rate_quantize (ROUND_HALF_EVEN, –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ Decimal)."
      - name: "domain.currencies"
        path: "src/py_accountant/domain/currencies.py"
        description: "Value object Currency –∏ —Å–µ—Ä–≤–∏—Å BaseCurrencyRule: –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫—É—Ä—Å–æ–≤ —á–µ—Ä–µ–∑ rate_quantize, –±–µ–∑ –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö."
      - name: "domain.accounts"
        path: "src/py_accountant/domain/accounts.py"
        description: "Value object Account: –≤–∞–ª–∏–¥–∞—Ü–∏—è full_name (–∏–µ—Ä–∞—Ä—Ö–∏—è —á–µ—Ä–µ–∑ ':'), derive name/parent_path, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è currency_code (upper, 3..10), parent_id –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω."
      - name: "domain.ledger"
        path: "src/py_accountant/domain/ledger.py"
        description: "–í–∞–ª–∏–¥–∞—Ç–æ—Ä –±–∞–ª–∞–Ω—Å–∞ LedgerValidator: –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–∞—è —Å–≤–µ—Ä–∫–∞ –≤ –±–∞–∑–æ–≤–æ–π –≤–∞–ª—é—Ç–µ (money_quantize), –±–µ–∑ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π."
      - name: "domain.trading_balance"
        path: "src/py_accountant/domain/trading_balance.py"
        description: "RawAggregator.aggregate –∏ ConvertedAggregator.aggregate –¥–ª—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞; —á–∏—Å—Ç–∞—è –¥–æ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞."
      - name: "domain.fx_audit"
        path: "src/py_accountant/domain/fx_audit.py"
        description: "FX Audit TTL domain service: FxAuditTTLService —Å make_cutoff/identify_old/batch_plan; —á–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –±–µ–∑ I/O."
      - name: "TTLUseCases"
        path: "src/py_accountant/application/use_cases_async/fx_audit_ttl.py"
        description: "Async TTL use cases for FX audit: –ø–ª–∞–Ω –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ archival/delete —á–µ—Ä–µ–∑ FxAuditTTLService; —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è CRUD-only."
      - name: "infrastructure"
        path: "src/py_accountant/infrastructure"
        description: "–ê–¥–∞–ø—Ç–µ—Ä—ã: SQLAlchemy, –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic, –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Ä—Ç–æ–≤."
      - name: "migrations"
        path: "src/py_accountant/infrastructure/migrations"
        description: "–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Migration API: –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ —á–µ—Ä–µ–∑ MigrationRunner, CLI, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Alembic –ø—Ä–æ–µ–∫—Ç–æ–≤."
        status: "in_progress"
        progress: "33%"
        waves_completed: ["wave_1", "wave_2", "wave_3"]
        waves_pending: ["wave_4", "wave_5", "wave_6", "wave_7", "wave_8", "wave_9"]
        last_updated: "2025-11-26"
        components:
          - name: "errors.py"
            status: "completed"
            description: "Exceptions: MigrationError, VersionMismatchError"
            wave: "wave_1"
            tests: "tests/unit/infrastructure/migrations/test_errors.py (5 tests, 100% pass)"
          - name: "env.py"
            status: "completed"
            description: "Alembic environment —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π sync/async –¥—Ä–∞–π–≤–µ—Ä–æ–≤"
            wave: "wave_2"
            lines_of_code: 150
            tests: "tests/unit/infrastructure/migrations/test_env.py (12 tests, 100% pass)"
            features:
              - "Lazy initialization –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"
              - "get_sync_url() —Å dual-URL –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π"
              - "run_migrations_offline() –∏ run_migrations_online()"
              - "–í–∞–ª–∏–¥–∞—Ü–∏—è asyncpg/aiosqlite/+async –¥—Ä–∞–π–≤–µ—Ä–æ–≤"
          - name: "runner.py"
            status: "completed"
            description: "MigrationRunner - –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏"
            wave: "wave_3"
            lines_of_code: 170
            tests: "tests/unit/infrastructure/migrations/test_runner.py (15 tests, 100% pass)"
            coverage: "~95%"
            completion_date: "2025-11-26"
            effort: "8 —á–∞—Å–æ–≤ (–Ω–∞ 1 —á–∞—Å —Ä–∞–Ω—å—à–µ –ø–ª–∞–Ω–∞)"
            methods:
              - "upgrade_to_head() - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏"
              - "upgrade_to_version(version) - –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ –≤–µ—Ä—Å–∏–∏"
              - "downgrade(steps, target) - –æ—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏"
              - "get_current_version() - —Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è —Å—Ö–µ–º—ã"
              - "get_pending_migrations() - —Å–ø–∏—Å–æ–∫ pending –º–∏–≥—Ä–∞—Ü–∏–π"
              - "validate_schema_version(expected) - –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–µ—Ä—Å–∏–∏"
            features:
              - "Async/await API –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π"
              - "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è URL (aiosqlite‚Üísqlite)"
              - "File-based testing –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏"
              - "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ (0001-0008)"
              - "Comprehensive error handling"
              - "Full type hints –∏ docstrings"
            documentation:
              - "MIGRATION_RUNNER_API.md - API quick reference"
              - "WAVE_3_COMPLETION_REPORT.md - –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç (359 lines)"
              - "WAVE_3_SUMMARY.md - executive summary"
          - name: "__init__.py"
            status: "updated"
            description: "Public API exports"
            wave: "wave_3"
            exports:
              - "MigrationRunner"
              - "MigrationError"
              - "VersionMismatchError"
          - name: "alembic.ini.template"
            status: "completed"
            description: "–®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Alembic —Å —Ä—É—Å—Å–∫–∏–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏"
            wave: "wave_1"
          - name: "script.py.mako"
            status: "completed"
            description: "–®–∞–±–ª–æ–Ω –º–∏–≥—Ä–∞—Ü–∏–π —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π –∏ docstrings"
            wave: "wave_1"
          - name: "versions/"
            status: "completed"
            description: "8 –º–∏–≥—Ä–∞—Ü–∏–π —Å—Ö–µ–º—ã –ë–î (0001-0008)"
            wave: "wave_1"
            wave: "wave_1"
            migrations_count: 8
          - name: "runner.py"
            status: "pending"
            description: "MigrationRunner –∫–ª–∞—Å—Å –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏"
            wave: "wave_3"
            estimated_effort: "8 hours"
          - name: "cli.py"
            status: "pending"
            description: "CLI –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏"
            wave: "wave_4"
          - name: "alembic_integration.py"
            status: "pending"
            description: "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Alembic –ø—Ä–æ–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ include_in_alembic()"
            wave: "wave_5"
      - name: "config"
        path: "src/py_accountant/infrastructure/config"
        description: "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ pydantic-settings; –≤—ã–±–æ—Ä –ø—Ä–æ—Ñ–∏–ª—è –æ–∫—Ä—É–∂–µ–Ω–∏—è."
      - name: "logging"
        path: "src/py_accountant/infrastructure/logging"
        description: "–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ structlog; –µ–¥–∏–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞."
      - name: "async_engine"
        path: "src/py_accountant/infrastructure/persistence/sqlalchemy/async_engine.py"
        description: "Async —Ñ–∞–±—Ä–∏–∫–∏: normalize_async_url, get_async_engine, get_async_session_factory."
      - name: "repositories_async"
        path: "src/py_accountant/infrastructure/persistence/sqlalchemy/repositories_async.py"
        description: "Async —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Ä—Ç–æ–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –Ω–∞ SQLAlchemy: CRUD + TTL –ø—Ä–∏–º–∏—Ç–∏–≤—ã, fast-path accounts.get_balance –∏ –∞–≥—Ä–µ–≥–∞—Ç—ã account_balances/account_daily_turnovers."
      - name: "asyncio_utils"
        path: "src/py_accountant/infrastructure/utils/asyncio_utils.py"
        description: "Helper run_sync(coro): –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫ –∫–æ—Ä—É—Ç–∏–Ω –∏–∑ sync-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞."
      - name: "currencies (use cases)"
        path: "src/py_accountant/application/use_cases_async/currencies.py"
        description: "Async currencies use cases: –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –≤—ã–±–æ—Ä –±–∞–∑–æ–≤–æ–π –≤–∞–ª—é—Ç—ã; —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ ‚Äî —Ç–æ–ª—å–∫–æ CRUD."
      - name: "accounts"
        path: "src/py_accountant/application/use_cases_async/accounts.py"
        description: "Async –∞–∫–∫–∞—É–Ω—Ç—ã: —Å–æ–∑–¥–∞–Ω–∏–µ/–ø–æ–ª—É—á–µ–Ω–∏–µ/—Å–ø–∏—Å–æ–∫; –∏—Å–ø–æ–ª—å–∑—É—é—Ç domain.Account –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏."
      - name: "ledger"
        path: "src/py_accountant/application/use_cases/ledger.py"
        description: "Sync ledger –∏ –±–∞–ª–∞–Ω—Å—ã: PostTransaction, GetBalance, GetLedger, ListLedger, GetTradingBalanceRawDTOs, GetTradingBalanceDetailedDTOs."
      - name: "fx_audit"
        path: "src/py_accountant/application/use_cases_async/fx_audit.py"
        description: "Async FX audit: AsyncAddExchangeRateEvent, AsyncListExchangeRateEvents."
      - name: "trading_balance"
        path: "src/py_accountant/application/use_cases_async/trading_balance.py"
        description: "Async trading balance use cases —á–µ—Ä–µ–∑ domain RawAggregator & ConvertedAggregator."
      - name: "fx_audit_ttl"
        path: "src/py_accountant/application/use_cases_async/fx_audit_ttl.py"
        description: "AsyncPlanFxAuditTTL –∏ AsyncExecuteFxAuditTTL: –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ TTL/–∞—Ä—Ö–∏–≤–∞—Ü–∏–∏."
      - name: "src/py_accountant/infrastructure/persistence/sqlalchemy/models.py"
        parent_module: "infrastructure"
        description: "ORM schema: CurrencyORM, AccountORM, JournalORM, TransactionLineORM, ExchangeRateEventORM, ExchangeRateEventArchiveORM, AccountBalanceORM, AccountDailyTurnoverORM."
      - name: "src/py_accountant/infrastructure/persistence/sqlalchemy/repositories_async.py"
        parent_module: "infrastructure"
        description: "Async —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Ä—Ç–æ–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –Ω–∞ SQLAlchemy: CRUD + TTL –ø—Ä–∏–º–∏—Ç–∏–≤—ã –∏ –∞–≥—Ä–µ–≥–∞—Ç—ã."
      - name: "src/py_accountant/infrastructure/persistence/sqlalchemy/uow.py"
        parent_module: "infrastructure"
        description: "AsyncSqlAlchemyUnitOfWork only (legacy sync UoW —É–¥–∞–ª—ë–Ω)."
      - name: "docs/RUNNING_MIGRATIONS.md"
        parent_module: "infrastructure"
        description: "Helper –¥–ª—è CI: –∑–∞–ø—É—Å–∫ Alembic –º–∏–≥—Ä–∞—Ü–∏–π, –ø—Ä–∏–º–µ—Ä—ã GitHub Actions/GitLab, checklist."
      - name: "src/py_accountant/infrastructure/utils/asyncio_utils.py"
        parent_module: "infrastructure"
        description: "run_sync(coro): –∑–∞–ø—Ä–µ—Ç nested loop, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ."
      - name: "documentation"
        path: "docs/"
        description: "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–ª–∞–Ω—ã —É–ª—É—á—à–µ–Ω–∏—è: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫."
        sub_modules:
          - name: "DOCUMENTATION_FIX_PROPOSAL.md"
            description: "–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (11 —Å—Ç—Ä–∞–Ω–∏—Ü): –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º, 3-—Ñ–∞–∑–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞."
          - name: "DOCUMENTATION_FIX_SUMMARY.md"
            description: "–ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: –∫–ª—é—á–µ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π."
          - name: "INTEGRATION_GUIDE.md"
            description: "–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ py_accountant –≤ –ø—Ä–æ–µ–∫—Ç—ã: setup, –ø—Ä–∏–º–µ—Ä—ã, dual-URL. –¢—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–º. DOCUMENTATION_FIX_PROPOSAL)."
          - name: "ARCHITECTURE_OVERVIEW.md"
            description: "–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞: —Å–ª–æ–∏ Domain/Application/Infrastructure, –¥–∏–∞–≥—Ä–∞–º–º—ã."
          - name: "ACCOUNTING_CHEATSHEET.md"
            description: "–®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–º –∫–æ–Ω—Ü–µ–ø—Ü–∏—è–º: –¥–µ–±–µ—Ç/–∫—Ä–µ–¥–∏—Ç, –ø—Ä–æ–≤–æ–¥–∫–∏, –±–∞–ª–∞–Ω—Å—ã."
          - name: "PERFORMANCE.md"
            description: "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: –∏–Ω–¥–µ–∫—Å—ã, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∞–≥—Ä–µ–≥–∞—Ç—ã."

  notes:
    - title: "Installed package vs local source"
      description: |
        Note: some integrator projects may have an installed PyPI/Git version of `py-accountant` in their virtualenv which includes a now-deprecated `py_accountant.sdk` module. When running tests in such integrator repositories, the interpreter may import the installed package from `site-packages` instead of the local `py_accountant` source in `src/`. See README for instructions to prefer the local repository (path dependency, uninstall, or PYTHONPATH).

  tests:
    unit_tests:
      - target_component: "AsyncGetAccountBalance"
        test_file: "tests/unit/application/test_async_get_account_balance.py"
        test_functions: ["test_balance_computed_via_ledger_scan", "test_balance_empty_zero"]
        coverage_status: "updated for fast-path"
      - target_component: "AccountAggregates"
        test_file: "tests/unit/infrastructure/test_account_aggregates.py"
        test_functions: [
          "test_repository_upserts_balance",
          "test_repository_upserts_turnover_same_day_multiple_lines",
          "test_repository_concurrent_postings_consistent_balance",
          "test_get_balance_fallback_zero_when_missing",
          "test_get_balance_matches_legacy_scan",
        ]
        coverage_status: "added"
      - target_component: "DomainErrors"
        test_file: "tests/unit/domain/test_errors.py"
        test_functions: ["test_errors_raise_and_inherit"]
        coverage_status: "added"
      - target_component: "QuantizeUtilities"
        test_file: "tests/unit/domain/test_quantize.py"
        test_functions: [
          "test_money_quantize_rounds",
          "test_rate_quantize_rounds",
          "test_no_global_context_mutation",
        ]
        coverage_status: "added"
      - target_component: "CurrencyValueObject"
        test_file: "tests/unit/domain/test_currency_base_rule.py"
        test_functions: ["test_set_base_preserves_other_rates", "test_clear_base", "test_set_base_missing_code_raises"]
        coverage_status: "added"
      - target_component: "AccountValueObject"
        test_file: "tests/unit/domain/test_accounts.py"
        test_functions: ["test_account_full_name_validation", "test_account_parent_id_optional", "test_account_full_name_invalid_raises"]
        coverage_status: "added"
      - target_component: "LedgerBalanceValidation"
        test_file: "tests/unit/domain/test_ledger_balance.py"
        test_functions:
          [
            "test_single_currency_balanced",
            "test_multi_currency_balanced_with_rates",
            "test_unbalanced_detected",
            "test_negative_cases",
            "test_entry_validation",
            "test_non_base_currency_rate_required_and_positive",
            "test_rounding_half_even_comparison",
          ]
        coverage_status: "added"
      - target_component: "RawTradingBalanceAggregation"
        test_file: "tests/unit/domain/test_trading_balance_raw.py"
        test_functions:
          [
            "test_empty_returns_no_lines",
            "test_single_currency_aggregate",
            "test_multi_currency_aggregate_separate_groups",
            "test_rounding_half_even_each_currency",
            "test_preserve_decimal_context",
            "test_reject_non_ledger_entry_input_guard",
          ]
        coverage_status: "added"
      - target_component: "ConvertedTradingBalanceAggregation"
        test_file: "tests/unit/domain/test_trading_balance_converted.py"
        test_functions:
          [
            "test_empty_returns_no_lines_converted",
            "test_single_currency_base_passthrough",
            "test_single_nonbase_with_rate",
            "test_multi_currency_mixed_and_sorting",
            "test_rounding_half_even_in_base",
            "test_missing_rate_raises_for_non_base",
            "test_non_positive_rate_raises",
            "test_unknown_currency_line_raises",
            "test_base_detection_via_get_base_currency",
            "test_preserve_decimal_context_converted",
            "test_input_guard_non_ledger_entry",
          ]
        coverage_status: "added"
      - target_component: "FxAuditTTLService"
        test_file: "tests/unit/domain/test_fx_audit_ttl.py"
        test_functions:
          [
            "test_identify_old_events",
            "test_archival_plan_sizes",
            "test_make_cutoff_normalization_utc",
            "test_validation_errors",
          ]
        coverage_status: "added"
      - target_component: "DocsPresence"
        test_file: "tests/docs/test_docs_sections_present.py"
        test_functions:
          [
            "test_readme_has_sdk_surface_section",
            "test_integration_guide_has_dual_url_and_sdk",
            "test_cheatsheet_exists_and_has_sections",
          ]
        coverage_status: "added"

  edges:
    inter_module_flows:
      - from: "infrastructure"
        to: "application"
        data_type: "–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Ä—Ç–æ–≤ (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏/UoW)"
        description: "–ê–¥–∞–ø—Ç–µ—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (async only)."
      - from: "application.use_cases_async.ledger"
        to: "infrastructure.persistence.sqlalchemy.repositories_async"
        data_type: "Use case ‚Üí Repository"
        description: "–ü–æ—Å—Ç–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —á—Ç–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —á–µ—Ä–µ–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏."
      - from: "application.use_cases_async.ledger"
        to: "application.ports"
        data_type: "Use case ‚Üí Ports"
        description: "–ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ AsyncUnitOfWork/Repositories."
      - from: "infrastructure.persistence.sqlalchemy.repositories_async"
        to: "infrastructure.persistence.sqlalchemy.models"
        data_type: "Repository ‚Üí ORM models"
        description: "–†–∞–±–æ—Ç–∞ —Å ORM –∫–ª–∞—Å—Å–∞–º–∏, –≤–∫–ª—é—á–∞—è –∞–≥—Ä–µ–≥–∞—Ç—ã I31."
      - from: "infrastructure.persistence.sqlalchemy.repositories_async"
        to: "infrastructure.persistence.sqlalchemy.uow"
        data_type: "Repository ‚Üí UoW"
        description: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AsyncSession –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–º scope."
      - from: "tests.integration.ledger"
        to: "application.use_cases_async.ledger"
        data_type: "Integration tests ‚Üí Use case"
        description: "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø–æ—Å—Ç–∏–Ω–≥–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞."

  validation_matrix:
    requirement_to_test_map:
      # SDK-specific requirements —É–¥–∞–ª–µ–Ω—ã; –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ core-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.
      # ...existing core requirements if any...

  roadmap_updates:
    - id: "ASYNC-03"
      title: "–ü–µ—Ä–µ–≤–æ–¥ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –Ω–∞ async API"
      status: "done"
      notes: "repositories_async.py ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ CRUD/TTL –¥–ª—è async —Å–ª–æ—è."
    - id: "ASYNC-04"
      title: "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏ –¥–ª—è Alembic –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤"
      status: "done"
      notes: "alembic/env.py –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç sync URL, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç DATABASE_URL_ASYNC."
    - id: "ASYNC-05"
      title: "Async Protocols –¥–ª—è UoW –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤"
      status: "done"
      notes: "ports.py —Å–æ–¥–µ—Ä–∂–∏—Ç AsyncUnitOfWork –∏ Async*Repository Protocol; –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏—Ö —É —Å–µ–±—è."
    - id: "ASYNC-06"
      title: "Use cases: –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ async —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —à—É–º–æ–º"
      status: "done"
      notes: "–î–æ–±–∞–≤–ª–µ–Ω—ã application/use_cases_async/*; sync use cases —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏."
    - id: "I28"
      title: "Deprecate sync repositories"
      status: "done"
      notes: "repositories.py –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ –∑–∞–≥–ª—É—à–∫–∏; –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ async —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏."
    - id: "I29"
      title: "–£–¥–∞–ª–µ–Ω–∏–µ legacy sync U–æW –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤"
      status: "done"
      notes: "–£–¥–∞–ª–µ–Ω—ã sync U–æW –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏; AsyncSqlAlchemyUnitOfWork ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π U–æW –≤ core."
    - id: "CORE-01"
      title: "–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ core-only –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é c installable-–ø–∞–∫–µ—Ç–æ–º py_accountant"
      status: "done"
      notes: |
        –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–Ω—Å—Ç–∞–ª–ª–∏—Ä—É–µ–º—ã–π –ø–∞–∫–µ—Ç src/py_accountant —Å core-only –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å—é (–±–µ–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ SDK-—Å–ª–æ—è).
        –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ domain/application/ports; –≤–Ω–µ—à–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç py_accountant.*.
        RPG-–≥—Ä–∞—Ñ –æ–±–Ω–æ–≤–ª—ë–Ω: –ø—É—Ç–∏ —É–∑–ª–æ–≤ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ src/py_accountant/...; SDK-—É–∑–ª—ã –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —É–¥–∞–ª–µ–Ω—ã –∏–ª–∏ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
        –ò–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Ä–µ–∞–ª–∏–∑—É—é—Ç —Å–≤–æ–π UnitOfWork –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º py_accountant.application.ports.
    - id: "MIGRATION-API"
      title: "–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Migration API –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏"
      status: "in_progress"
      start_date: "2025-11-26"
      progress: "33%"
      estimated_total_effort: "40 hours"
      actual_effort: "13.5 hours"
      target_version: "1.2.0"
      waves_completed: 3
      waves_total: 9
      notes: |
        üîÑ –í –ü–†–û–¶–ï–°–°–ï: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –ë–î
        
        ‚úÖ Wave 1 COMPLETED (1 hour):
        - –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ src/py_accountant/infrastructure/migrations/
        - errors.py: MigrationError, VersionMismatchError (5 tests ‚úÖ)
        - alembic.ini.template: —à–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        - script.py.mako: —à–∞–±–ª–æ–Ω –º–∏–≥—Ä–∞—Ü–∏–π —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
        - –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ 8 –º–∏–≥—Ä–∞—Ü–∏–π –≤ versions/
        - –û—Ç—á—ë—Ç: prompts/migration_api/WAVE_1_COMPLETION_REPORT.md
        
        ‚úÖ Wave 2 COMPLETED (2.5 hours):
        - env.py: Alembic environment (150 LOC)
        - Lazy initialization –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        - get_sync_url(): dual-URL –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥—Ä–∞–π–≤–µ—Ä–æ–≤
        - run_migrations_offline/online(): offline/online —Ä–µ–∂–∏–º—ã
        - 12 comprehensive —Ç–µ—Å—Ç–æ–≤ (100% pass, ~95% coverage)
        - –û—Ç—á—ë—Ç: prompts/migration_api/WAVE_2_COMPLETION_REPORT.md
        
        ‚úÖ Wave 3 COMPLETED (8 hours, –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –Ω–∞ 1 —á–∞—Å —Ä–∞–Ω—å—à–µ):
        - runner.py: MigrationRunner –∫–ª–∞—Å—Å (170 LOC, 9 public methods)
        - upgrade_to_head(), upgrade_to_version(), downgrade()
        - get_current_version(), get_pending_migrations(), validate_schema_version()
        - Async/await API, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è URL (aiosqlite‚Üísqlite)
        - 15 comprehensive unit —Ç–µ—Å—Ç–æ–≤ (–ø—Ä–µ–≤—ã—à–µ–Ω –ø–ª–∞–Ω –Ω–∞ 50%, 100% pass)
        - Coverage ~95%, execution time 1.16s
        - __init__.py: —ç–∫—Å–ø–æ—Ä—Ç—ã MigrationRunner, MigrationError, VersionMismatchError
        - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: MIGRATION_RUNNER_API.md (quick reference)
        - –û—Ç—á—ë—Ç: prompts/migration_api/WAVE_3_COMPLETION_REPORT.md (359 lines)
        - Summary: prompts/migration_api/WAVE_3_SUMMARY.md
        
        ‚è≥ Wave 4 PENDING (CLI Commands, 4 hours):
        - runner.py: MigrationRunner –∫–ª–∞—Å—Å
        - Async API: upgrade/downgrade/get_current/get_pending
        - 8+ —Ç–µ—Å—Ç–æ–≤
        
        üìã Remaining waves: 4-8 (CLI, Integration, Public API, Tests, Docs)
        üìä RPG –≥—Ä–∞—Ñ: prompts/migration_api/migration_api_rpg_graph.yaml
        üéØ –ú–µ—Ç–æ–¥–∏–∫–∞: Repository Planning Graph (RPG)

    - id: "DOC-SPRINTS"
      title: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ (8 —Å–ø—Ä–∏–Ω—Ç–æ–≤)"
      status: "completed"
      completion_date: "2025-11-26"
      notes: |
        ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û: 8 —Å–ø—Ä–∏–Ω—Ç–æ–≤ –ø–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ —Ñ–∞–∫—Ç—É –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ core-only
        - ‚úÖ S1: –ê—É–¥–∏—Ç –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è (1 –¥–µ–Ω—å, 2025-11-25)
        - ‚úÖ S2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π (1 –¥–µ–Ω—å, 2025-11-25)
        - ‚úÖ S3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –∫–æ–¥–∞ (1 –¥–µ–Ω—å, 2025-11-25)
        - ‚úÖ S4: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –∏ –ø–æ—Ä—Ç–æ–≤ (1 –¥–µ–Ω—å, 2025-11-25)
        - ‚úÖ S5: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è (1 –¥–µ–Ω—å, 2025-11-25)
        - ‚úÖ S6: –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (4 —á–∞—Å–∞, 2025-11-25)
        - ‚úÖ S7: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º (1 —á–∞—Å, 2025-11-25)
        - ‚úÖ S8: –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–≤–µ—Ä–∫–∞ –∏ –∏–Ω–¥–µ–∫—Å (2 —á–∞—Å–∞, 2025-11-25)
        - ‚úÖ DOC-REORG: –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (1 —á–∞—Å, 2025-11-26)
        
        –î–µ—Ç–∞–ª–∏: prompts/sprint_graph.yaml, prompts/sprint_*.md, docs/audit/
        –í–µ—Ä—Å–∏—è: 1.1.0 (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è)
        
        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
        - 18/18 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ
        - 100% –ø–æ–∫—Ä—ã—Ç–∏–µ API (17 use cases, 6 protocols, 14 DTOs)
        - 100% –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (27 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
        - 3 –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞ (FastAPI, CLI, Telegram)
        - Integration time: 30 minutes (8x improvement from 4 hours)
        - docs/ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (17 files)
        - docs/audit/ —Å–æ–¥–µ—Ä–∂–∏—Ç audit –º–∞—Ç–µ—Ä–∏–∞–ª—ã (20 files, gitignored)
