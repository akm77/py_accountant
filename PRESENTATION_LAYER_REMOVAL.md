# –£–¥–∞–ª–µ–Ω–∏–µ —Å–ª–æ—è Presentation (I32)

**–î–∞—Ç–∞:** 2025-11-17  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ

## –û–±–∑–æ—Ä

–°–ª–æ–π `src/presentation` –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º —Ç–µ—Å—Ç—ã –±—ã–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω—ã –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞. –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ SDK (`py_accountant.sdk`).

## –ü—Ä–∏—á–∏–Ω–∞ —É–¥–∞–ª–µ–Ω–∏—è

- **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**: —Ñ–æ–∫—É—Å –Ω–∞ SDK –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º –ø—É–±–ª–∏—á–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- **–°–Ω–∏–∂–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏**: CLI –¥—É–±–ª–∏—Ä–æ–≤–∞–ª —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å SDK
- **–£–ª—É—á—à–µ–Ω–∏–µ DX**: –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (SDK)

## –£–¥–∞–ª—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ —Ñ–∞–π–ª—ã

1. **src/presentation/** - –≤–µ—Å—å —Å–ª–æ–π –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
   - `src/presentation/cli/` - CLI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Typer
   - `src/presentation/api/` - –∑–∞–≥–ª—É—à–∫–∏ API (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
   - –í—Å–µ–≥–æ —É–¥–∞–ª–µ–Ω–æ: 13 —Ñ–∞–π–ª–æ–≤

2. **tests/integration/cli/** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã CLI
   - `test_cli_accounts.py`
   - `test_cli_currencies.py`
   - `test_cli_fx_audit.py`
   - `test_cli_ledger.py`
   - `test_cli_ledger_post_files.py`
   - `test_cli_ledger_post_minimal.py`
   - `test_cli_startup.py`
   - `test_cli_trading_balance.py`
   - –í—Å–µ–≥–æ —É–¥–∞–ª–µ–Ω–æ: 8 —Ñ–∞–π–ª–æ–≤

3. **tests/unit/presentation/** - —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
   - `test_cli_basic.py`
   - `test_no_async_bridge_imports.py`
   - `test_run_sync.py`
   - –í—Å–µ–≥–æ —É–¥–∞–ª–µ–Ω–æ: 3 —Ñ–∞–π–ª–∞

4. **tests/e2e/cli/** - e2e —Ç–µ—Å—Ç—ã CLI (–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –±—ã–ª–∞ –ø—É—Å—Ç–æ–π)

5. **tests/integration/test_idempotent_posting.py** - —Ç–µ—Å—Ç –∑–∞–≤–∏—Å–µ–ª –æ—Ç CLI

**–ò—Ç–æ–≥–æ —É–¥–∞–ª–µ–Ω–æ:** 25+ —Ñ–∞–π–ª–æ–≤ —Å –∫–æ–¥–æ–º –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–∞–º–∏

## –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

1. **README.md**
   - –£–¥–∞–ª—ë–Ω —Ä–∞–∑–¥–µ–ª "Quick Start" —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ CLI –∫–æ–º–∞–Ω–¥
   - –û–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã: —É–¥–∞–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ Presentation —Å–ª–æ–π
   - –£–¥–∞–ª—ë–Ω —Ä–∞–∑–¥–µ–ª "–ù–æ–≤–æ–µ –≤ CLI"
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã FX Audit, Trading Balance, Parity-report
   - –£–¥–∞–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ `docs/CLI_QUICKSTART.md` –∏–∑ –ø–æ–ª–µ–∑–Ω—ã—Ö —Å—Å—ã–ª–æ–∫

2. **docs/INTEGRATION_GUIDE.md**
   - –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã CLI –∫–æ–º–∞–Ω–¥ –Ω–∞ –ø—Ä–∏–º–µ—Ä—ã SDK
   - –û–±–Ω–æ–≤–ª—ë–Ω —Ä–∞–∑–¥–µ–ª "Runtime vs Migration Database URLs"
   - –£–¥–∞–ª—ë–Ω —Ä–∞–∑–¥–µ–ª "CLI vs SDK"
   - –û–±–Ω–æ–≤–ª—ë–Ω —Ä–∞–∑–¥–µ–ª "–§–æ—Ä–º–∞—Ç—ã –≤–≤–æ–¥–∞/—Ñ–∞–π–ª–æ–≤"

3. **docs/TRADING_WINDOWS.md**
   - –ó–∞–º–µ–Ω–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã CLI –∫–æ–º–∞–Ω–¥ –Ω–∞ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SDK/use cases
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è `trading raw` –∏ `trading detailed`

4. **AUDIT_REPORT.md**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "–¢–æ–ø–æ–ª–æ–≥–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è"
   - –£–¥–∞–ª–µ–Ω—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è presentation –∏–∑ —Å–µ–∫—Ü–∏–∏ "–õ–∏–Ω—Ç –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑"

### RPG –≥—Ä–∞—Ñ

**rpg_py_accountant.yaml**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ metadata: –∏–∑–º–µ–Ω–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞, last_updated: "2025-11-17"
   - –£–¥–∞–ª—ë–Ω —É–∑–µ–ª "presentation"
   - –£–¥–∞–ª—ë–Ω —É–∑–µ–ª "async_cli_foundation"
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã parent_module –¥–ª—è `examples/telegram_bot/*` (presentation ‚Üí py_accountant.sdk)
   - –û–±–Ω–æ–≤–ª—ë–Ω roadmap:
     - ASYNC-07: –æ–±–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è presentation layer
     - I-UX-01: –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ deprecated/removed
     - I-UX-02: –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ deprecated/removed
     - I-DX-03: –æ–±–Ω–æ–≤–ª–µ–Ω–æ (—É–¥–∞–ª–µ–Ω—ã CLI-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
     - –î–æ–±–∞–≤–ª–µ–Ω I32: "–£–¥–∞–ª–µ–Ω–∏–µ —Å–ª–æ—è src/presentation (CLI)" —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º done

### –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥

**src/application/use_cases_async/__init__.py**
   - –û–±–Ω–æ–≤–ª—ë–Ω docstring: —É–¥–∞–ª–µ–Ω–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ CLI –∏ ASYNC-07
   - –ù–æ–≤—ã–π —Ç–µ–∫—Å—Ç: "Access to functionality is provided through the SDK layer."

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ presentation –≤ Python —Ñ–∞–π–ª–∞—Ö
grep -r "from presentation" src/ tests/  # 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
grep -r "import presentation" src/ tests/  # 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
grep -r "presentation.cli" . --include="*.py" --include="*.md"  # 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
ls -la src/  # presentation –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
ls -la tests/integration/  # cli –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
ls -la tests/unit/  # presentation –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ SDK
python -c "from py_accountant.sdk import bootstrap, use_cases, json; print('OK')"  # OK
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Ä–∞–Ω–µ–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —á–µ—Ä–µ–∑ CLI, —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ SDK:

### –†–∞–Ω—å—à–µ (CLI):
```bash
poetry run python -m presentation.cli.main currency add USD
poetry run python -m presentation.cli.main ledger post --line "DEBIT:Assets:Cash:100:USD" --line "CREDIT:Income:Sales:100:USD"
poetry run python -m presentation.cli.main ledger balance Assets:Cash --json
```

### –¢–µ–ø–µ—Ä—å (SDK):
```python
import asyncio
from py_accountant.sdk import bootstrap, use_cases

async def main():
    app = bootstrap.init_app()
    
    # –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª—é—Ç—É
    async with app.uow_factory() as uow:
        await use_cases.add_currency(uow, app.clock, "USD")
    
    # –ü–æ—Å—Ç–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    async with app.uow_factory() as uow:
        tx = await use_cases.post_transaction(
            uow, app.clock,
            ["DEBIT:Assets:Cash:100:USD", "CREDIT:Income:Sales:100:USD"],
            memo="Sale"
        )
    
    # –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å
    async with app.uow_factory() as uow:
        balance = await use_cases.get_account_balance(uow, app.clock, "Assets:Cash")
    
    print(f"Balance: {balance}")

asyncio.run(main())
```

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç

### –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** - –æ–¥–∏–Ω —Å–ª–æ–π –º–µ–Ω—å—à–µ  
‚úÖ **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞** - SDK –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞  
‚úÖ **–°–Ω–∏–∂–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞** - —É–¥–∞–ª–µ–Ω–æ 25+ —Ñ–∞–π–ª–æ–≤ –∫–æ–¥–∞ –∏ —Ç–µ—Å—Ç–æ–≤  
‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ DX** - –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥  
‚úÖ **–ë—ã—Å—Ç—Ä–µ–µ —Ç–µ—Å—Ç—ã** - –º–µ–Ω—å—à–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ CLI  

### –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

‚ÑπÔ∏è **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞** - –≤—Å–µ –ø—Ä–∏–º–µ—Ä—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ SDK  
‚ÑπÔ∏è **RPG –≥—Ä–∞—Ñ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω** - roadmap –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã  
‚ÑπÔ∏è **–ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã** - Alembic —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ  

### –ß—Ç–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

- SDK —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–ª–∞—Å—å –ø–æ–ª–Ω–æ–π
- –í—Å–µ use cases –¥–æ—Å—Ç—É–ø–Ω—ã
- –¢–µ—Å—Ç—ã unit/integration –¥–ª—è SDK –∏ use cases —Ä–∞–±–æ—Ç–∞—é—Ç
- –ü—Ä–∏–º–µ—Ä—ã (telegram_bot) —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ SDK

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
2. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
3. ‚úÖ RPG –≥—Ä–∞—Ñ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
4. üìã –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤
5. üìã –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –æ–±–Ω–æ–≤–∏—Ç—å CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ã (—É–¥–∞–ª–∏—Ç—å —à–∞–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è CLI)

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–£–¥–∞–ª–µ–Ω–∏–µ —Å–ª–æ—è presentation –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ. –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –±–æ–ª–µ–µ —á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –µ–¥–∏–Ω—ã–º –ø—É–±–ª–∏—á–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º —á–µ—Ä–µ–∑ SDK. –í—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ `py_accountant.sdk`.

